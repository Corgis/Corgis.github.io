!function(c){function e(e){for(var t,n,r=e[0],a=e[1],o=e[2],i=0,s=[];i<r.length;i++)n=r[i],f[n]&&s.push(f[n][0]),f[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(c[t]=a[t]);for(d&&d(e);s.length;)s.shift()();return l.push.apply(l,o||[]),u()}function u(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==f[o]&&(r=!1)}r&&(l.splice(t--,1),e=p(p.s=n[0]))}return e}var n={},m={2:0},f={2:0},l=[];function p(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,p),t.l=!0,t.exports}p.e=function(l){var e=[];m[l]?e.push(m[l]):0!==m[l]&&{3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1}[l]&&e.push(m[l]=new Promise(function(e,r){for(var t="static/css/"+({}[l]||l)+".2ed214.css",a=p.p+t,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=(c=n[o]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(i===t||i===a))return e()}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){var c;if((i=(c=s[o]).getAttribute("data-href"))===t||i===a)return e()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=e,u.onerror=function(e){var t=e&&e.target&&e.target.src||a,n=new Error("Loading CSS chunk "+l+" failed.\n("+t+")");n.request=t,delete m[l],u.parentNode.removeChild(u),r(n)},u.href=a,document.getElementsByTagName("head")[0].appendChild(u)}).then(function(){m[l]=0}));var t,n=f[l];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,t){n=f[l]=[e,t]});e.push(n[2]=r);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,p.nc&&o.setAttribute("nonce",p.nc),o.src=p.p+"static/js/"+({}[t=l]||t)+".2ed214.js",a=function(e){o.onerror=o.onload=null,clearTimeout(i);var t=f[l];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,a=new Error("Loading chunk "+l+" failed.\n("+n+": "+r+")");a.type=n,a.request=r,t[1](a)}f[l]=void 0}};var i=setTimeout(function(){a({type:"timeout",target:o})},12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(e)},p.m=c,p.c=n,p.d=function(e,t,n){p.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(t,e){if(1&e&&(t=p(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(p.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)p.d(n,r,function(e){return t[e]}.bind(null,r));return n},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="/resource/",p.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var d=r;l.push([402,0]),u()}({1:function(e,t,n){e.exports=n(47)(3)},14:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n(12),a=n.n(r),o=/^[\s\u3000\uFEFF]+|[\s\u3000\uFEFF]+$/g;function i(e){if("string"==typeof e)return e.replace(o,"");if("object"!=a()(e))return e;for(var t in e)e.hasOwnProperty(t)&&(e[t]=i(e[t]));return e}function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";return(new Array(t).join(n)+e).slice(-Math.max(t,(""+e).length))}},142:function(e,t,n){e.exports=n(47)(93)},155:function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"ui-manage-footer"})};r._withStripped=!0;n(327);var a=n(46),o=Object(a.a)({},r,[],!1,null,null,null);o.options.__file="src/components/manage/common/footer.vue";t.a=o.exports},19:function(e,t,n){"use strict";function r(e){return"[object Array]"===Object.prototype.toString.apply(e)}var a=n(12),o=n.n(a);function i(e){if(!e)return!1;if("object"==o()(e)||r(e))return!0;if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=o()(t)||!t)}catch(e){return!1}return!1}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}n(60);n(14),n(48);var c=n(55),u=n(2),l=n.n(u);l.a.locale("zh-cn"),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c})},28:function(e,t,n){e.exports=n(47)(88)},327:function(e,t,n){"use strict";var r=n(73);n.n(r).a},329:function(e,t,n){var r={"./zh-cn":141,"./zh-cn.js":141};function a(e){var t=o(e);return n(t)}function o(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=o,(e.exports=a).id=329},330:function(e,t,n){"use strict";var r=n(74);n.n(r).a},34:function(e,t,n){var r=" https://www.easy-mock.com/mock/5cbd1d90d025f46f6690ae11/api-mp".replace(/([^:])\/{2,}/g,"$1/"),a={400:"{status}:请求数据格式错误！",401:"{status}:请刷新页面重新操作或退出重登录！",403:"{status}:请刷新页面重新操作或退出重登录！",404:"{status}:请求路径不存在！",405:"{status}:请求方法服务端不允许！",408:"{status}:请求超时，请稍后重试！",415:"{status}:服务器无法处理请求附带的媒体格式！",500:"{status}:系统异常，请刷新页面重新操作或退出重登录！",other:"{status}:网络问题，请稍后重试！"};e.exports={baseURL:r,timeout:6e4,contentType:{xml:"text/xml",json:"application/json;charset=UTF-8",form:"application/x-www-form-urlencoded;charset=UTF-8"},method:["OPTIONS","HEAD","GET","POST","PUT","DELETE","TRACE","CONNECT"],statusCode:a,getStatusTxt:function(n){var e=a[n.status]||a.other;return e=e.replace(/\{(\w+)\}/g,function(e,t){return n[t]||""})}}},358:function(e,t){},364:function(e,t,n){},402:function(e,t,n){"use strict";n.r(t);n(162);var r=n(1),a=n(75),o="/gateway/api.action",u={common:{userInfo:"GET:/v1.0/common/userinfo",schoolLogo:"GET:/v1.0/schoolLogo/{id}",phone_info:"GET:/v1.0/common/phone_info",info:"GET:/v1.0/common/info",login:"POST:/v1.0/login",captcha:"GET:/v1.0/captcha",new:"POST:".concat(o,"?apiType=manage&method=plant/test/mulute.action"),newOne:"POST:".concat(o,"/{id}?method=plant/new/test.action&id={id}"),test:"POST:/v1/1234567/merchantApply/findPayment?RequestType=form"},commons:{login:"POST:/platform-gouc/user/login",logout:"POST:/platform-gouc/user/logout",captcha:"GET:/platform-gouc/stream/captcha",getPermission:"POST:/platform-gouc/user/powerInfo",info:"POST:/platform-gouc/user/info",getUploadSign:"POST:/0x100F136234524/savefile"},system:{user:{query:"GET:/userInfo/list",add:"POST:/userInfo/save",edit:"POST:/userInfo/update",del:"POST:/userInfo/remove"}},application:{market:{query:"GET:/terminal-manage/app/latest",add:"POST:/terminal-manage/app",edit:"POST:/terminal-manage/app",del:"",addVersion:"POST:/terminal-manage/app",editVersion:"POST:/terminal-manage/app",queryAll:"GET:/terminal-manage/app"},issue:{query:"GET:/terminal-manage/app/latest",add:"POST:/terminal-manage/app",edit:"POST:/terminal-manage/app",queryAll:"GET:/terminal-manage/app"},model:{query:"GET:/terminal-manage/model",add:"",edit:"",del:""},organization:{query:"GET:/terminal-manage/organization",add:"",edit:"",del:""}},terminal:{query:"GET:/terminal-manage/tam/terminal",add:"POST:/terminal-manage/terminal",import:"POST:/terminal-manage/terminal",edit:"POST:/terminal-manage/terminal",del:"DELETE:/terminal-manage/terminal/{id}",app:{query:"GET:/terminal-manage/tam",handle:"POST:/terminal-manage/tam"}},log:{query:"POST:/platform-oss/listfile",create:"GET:/terminal-manage/log"}},i={title:"智能终端管理平台",sex:[{label:"男",value:1},{label:"女",value:2}],levelOption:[{label:"系统级,自动更新",value:0},{label:"系统级,管理员更新",value:1},{label:"用户级",value:2}]},s={illegal:["exe","cmd","sh","bat","com","dll"],video:["mp4","m4v","flv","f4v","wmv","avi","mov","mpg","mpeg","3gp","rmvb"],audio:["mp3","aac","wav","wma","cda","flac","m4a","mid","mka"],document:["doc","docx","ppt","pptx","pdf"],image:["jpg","jpeg","gif","png"],excel:["xls","xlsx"],word:["doc","docx"],ppt:["ppt","pptx"],pdf:["pdf"],type:{other:0,video:1,audio:2,document:3,image:4},status:{trans:1,normal:2,transFail:-1,uploadFail:-2},chunkSize:"1MB",maxSize:"4GB",thumbMaxSize:"500KB",docMaxSize:"100MB",typeLabel:[{value:1,label:"视频"},{value:2,label:"音频"},{value:3,label:"文档"},{value:4,label:"图片"},{value:0,label:"其他"}],thumbSize:{width:500,height:281}},c={API:u,VAR:i,FILE:s,REG:{phone:/^1[345789]\d{9}$/,letterOrNumber:/^[0-9a-zA-Z]*$/,idNumber:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/},install:function(e){c.installed||(c.installed=!0,e.prototype.$cfg=c)}},l=c,m=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"manage"}},[t("div",{staticClass:"ui-content-container"},[t("router-view")],1)])};m._withStripped=!0;var f=n(46),p=Object(f.a)({},m,[],!1,null,null,null);p.options.__file="src/components/manage/index.vue";var d=p.exports,h=n(106),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"title",rawName:"v-title",value:t.pageTitle,expression:"pageTitle"}],staticClass:"c-m-login"},[n("div",{staticClass:"ui-login-logo"},[t._v("智能终端管理平台\n\t\t"),n("div",{staticClass:"right-login"},[n("div",{staticClass:"login-title"},[t._v("系统登录")]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules}},[n("el-form-item",{attrs:{prop:"account"}},[n("el-input",{attrs:{placeholder:"用户名",size:"medium"},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-person"})])],2)],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",size:"medium",placeholder:"密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-lock"})])],2)],1),t._v(" "),t.formData.id?n("el-form-item",{staticClass:"captcha-item"},[n("el-input",{attrs:{type:"password",size:"medium",placeholder:"验证码"},model:{value:t.formData.captcha,callback:function(e){t.$set(t.formData,"captcha",e)},expression:"formData.captcha"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-authcode"})])],2),t._v(" "),n("img",{attrs:{src:t.captchaPath,alt:""},on:{click:t.getPath}})],1):t._e(),t._v(" "),n("el-form-item",{staticClass:"login-btn"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)]),t._v(" "),n("Footer")],1)};g._withStripped=!0;var v=n(155),y=n(19),b={components:{Footer:v.a},data:function(){return{pageTitle:"登录",captchaPath:"",formData:{account:"",password:"",captcha:"",op:1,id:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不得小于六位",trigger:"blur"}]}}},methods:{getPath:function(){var e=+new Date,t="".concat(this.$cfg.API.commons.captcha,"?id=").concat(this.formData.id,"&width=100&height=36&type=png&_t=").concat(e);this.captchaPath=y.d.completion(t)},login:function(){var t=this,r=this;this.$refs.form.validate(function(e){e&&t.$api(t.$cfg.API.commons.login,r.formData,{showLoading:!0}).then(function(e){var t=e.object.token||"";r.jump(t)}).catch(function(e){var t=e.data.errcode,n=e.data.object&&e.data.object.id;t&&n&&(r.formData.id=n,r.getPath()),r._showErrMsg(e,"登录失败")})})},fetchCaptcha:function(e){var t=this,n="".concat(t.$cfg.API.commons.captcha,"?id=").concat(e,"&width=130&height=50&type=png");this.$api(n).then(function(e){t.captchaPath=e}).catch(function(e){})},jump:function(e){this.$store.commit("info/setUserToken",e);var t=this.$route.query.path||"/";this.$router.push({path:t})}},mounted:function(){},created:function(){var t=this;document.onkeydown=function(e){13==e.keyCode&&t.login()}},beforeDestroy:function(){document.onkeydown=void 0}},w=(n(330),Object(f.a)(b,g,[],!1,null,null,null));w.options.__file="src/components/manage/login/index.vue";var T=w.exports;r.default.use(h.a);var O,P=new h.a({scrollBehavior:function(){return{y:0}},routes:[{path:"/login",name:"login",component:T}],linkActiveClass:"active"}),j=n(107),x=n(12),S=n.n(x),E=n(34),C=n.n(E),M=n(13),_=n.n(M),k=n(156),L=n.n(k),I=n(157),q=n.n(I),$=n(55),N=n(14),A=n(28),D=n.n(A),U=n(76),F=n.n(U),R=0;function z(){0===R&&(O=A.Loading.service({customClass:"diy-load-content",background:"rgba(255,255,255,0)",text:"数据加载中，请稍候..."})),R++}function B(){R<=0||0===--R&&F()(G,200)()}var G=function(){0===R&&O.close()},K={timeout:C.a.timeout,baseURL:C.a.baseURL,contentType:"json",trim:!0,retry:!0,maxRetry:2,headers:{"X-Requested-With":"XMLHttpRequest"}};var H=function(e){var i=L.a.create(_()(!0,{},K,e));return i.interceptors.request.use(function(e){if(!e)throw new Error("请求配置丢失，请检查request拦截器是否没有return返回配置");e.contentType&&C.a.contentType[e.contentType]&&(e.headers["Content-Type"]=C.a.contentType[e.contentType]);var t=Object($.getvar)(e.url,"RequestType");t&&(e.headers["Content-Type"]=C.a.contentType[t]);var n=e.data,r=He.state.info.UserToken||"";return r&&(n=_()({},n,{token:r}),e.headers.token=r),n&&e.trim&&(n="object"==S()(n)?"get"==e.method?Object(N.b)(n):"json"==e.contentType?JSON.stringify(n,function(e,t){return Object(N.b)(t)}):q.a.stringify(Object(N.b)(n)):Object(y.b)(n)?JSON.stringify(Object(N.b)(JSON.parse(n))):Object(N.b)(n),e.data=n),"get"==e.method.toLowerCase()&&(e.url=Object($.join)(e.url,n)),e.showLoading&&z(),e}),i.interceptors.response.use(function(e){var t=e.data,n=e.config;e.config.showLoading&&B(),t&&Object(y.b)(t)||(t={errcode:"-23",errmsg:"",object:""});var r,a=!1;if((!n.retryTime||n.retryTime<n.maxRetry)&&("boolean"==typeof n.retry&&n.retry?a=30==t.code:"function"==typeof n.retry&&(a=!0===n.retry(t))),a)return n.source?(r=n.source).source=_()({},r):(r=n).url=r.url.replace(r.baseURL,""),r.retryTime=n.retryTime?n.retryTime+1:1,i(r);if("0"===t.errcode)return t;t.errmsg||(t.errmsg="操作失败！",t.errtype="public");var o=new Error(t.errmsg);throw o.data=t,o.response=e,o},function(e){var t={errcode:"-23",errmsg:""};return e&&e.response?(t.errcode=-e.response.status,t.errmsg=C.a.getStatusTxt(e.response)):(console.error(e),t.errmsg="请求失败：网络错误或超时"),e.data=t,e.config.showLoading&&B(),Promise.reject(e)}),i},J=/\{(.*?)\}/g;function W(e){if(e.apis&&this.injectAPI(e.apis),e.methods){var t="boolean"==typeof e.methods?C.a.method:e.methods;this.injectMethod(t)}this.instance=H(e.axios)}W.prototype={request:function(e,n,t){if(!this.instance)throw new Error("未初始化，请先执行install方法");if(e){var r=e.indexOf(":"),a="get",o={};return r!=e.indexOf("://")&&-1<r&&r<=7&&(a=e.substr(0,r).toLowerCase(),e=e.substring(r+1)),J.test(e)&&(e=e.replace(J,function(e,t){return n&&void 0!==n[t]?n[t]:""})),o.url=e,o.method=a,o.data=n,(o=_()(o,t)).source=_()({},o),this.instance(o)}},injectAPI:function(e){var r=this;for(var t in e)if(e.hasOwnProperty(t))if("object"==S()(t))for(var n in t)this[t+"."+n]=function(n){return function(e,t){return r.request(n,e,t)}}(e[t][n]);else this[t]=function(n){return function(e,t){return r.request(n,e,t)}}(e[t]);return this},injectMethod:function(e){for(var t=e.length,n=0;n<t;n++)this[e[n].toLowerCase()]=function(r){return function(e,t,n){return n=_()({},n,{method:r}),this.request(e,t,n)}}(e[n]);return this},intercept:function(){if(!this.instance)throw new Error("未初始化，请先执行install方法");var e=arguments[0].toLowerCase(),t=Array.prototype.slice.call(arguments,1),n=this.instance.interceptors[e];return n.use.apply(n,t),this}};var V=W,X=n(104),Y=n(18),Z={namespace:"$api",methods:!0};function Q(e){var t=new V(e),n=X(V.prototype.request,t);return Y.extend(n,V.prototype,t),Y.extend(n,t),n}var ee=Q(Z);ee.install=function(e,t){if(t=_()(Z,t),!e||!e[t.namespace]){var n=Q(t);return e&&("function"==typeof e?e.prototype[t.namespace]=n:e[t.namespace]=n),n}};var te=ee,ne=(n(358),window),re=ne.location,ae=ne.navigator,oe=ae.userAgent.toLowerCase();function ie(e){return e.test(oe)}var se="ontouchend"in ne,ce=ie(/android|htc/)||/linux/i.test(ae.platform+""),ue=ce&&ie(/mobile/),le=ce&&!ue,me=!ce&&ie(/ipad/),fe=!ce&&ie(/ipod|iphone/),pe=me||fe,de=ie(/windows/),he=ie(/windows phone/),ge=de&&ie(/touch/)&&!he,ve=ie(/meego/),ye=!!ae.standalone,be=ie(/ucbrowser/),we=ie(/micromessenger/),Te=ie(/qq/),Oe=!!ne.chrome,Pe=ce&&ie(/htc\s+/),je=ue||fe||he||ve,xe=ie(/tablet/)||le||me||ge;(""+re.port).indexOf("0");r.default.use(te);var Se=r.default.prototype.$api;Se.intercept("request",function(e){return e.data=_()({_t:+new Date},window._params,e.data),e}),Se.intercept("response",function(e){return null==e.result&&(e.result={}),e},function(e){return 168==(e.data||{}).code&&(A.Message.error({showClose:!0,message:"session失效，重新登录"}),setTimeout(function(){He.commit("info/setUserToken",""),He.commit("rbac/setPermission",[]);var e=P.history.current.path||"";P.push({name:"login",query:{path:e}}),location.reload()},1500)),Promise.reject(e)});var Ee=Se,Ce=n(108),Me=n.n(Ce);var _e=!1,ke={namespaced:!0,state:{UserToken:Me.a.get("token"),common:{},school:{session:"odsfe324ds-dersd"},collapseStatus:!1,organizationOption:[]},mutations:{setCommonInfo:function(e,t){e.common=t},setSchoolInfo:function(e,t){e.school=t},setUserToken:function(e,t){var n=t||"";Me.a.set("token",n,{expires:1}),e.UserToken=n},setCollapseStatus:function(e,t){e.collapseStatus=t},setOrganizationOption:function(e,t){e.organizationOption=t}},actions:{fetchCommonInfo:function(e){var t=e.commit,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.type,a=n.force;if(!_e||a){var o=r?u.common.phone_info:u.common.info;Ee(o).then(function(e){_e=!0,t("setCommonInfo",e.result)}).catch(function(){})}},fetchUserInfo:function(e){var t=e.commit;Ee(u.commons.info).then(function(e){t("setCommonInfo",e.object.userInfo||{})}).catch(function(){})},fetchOrganization:function(e){var n=e.commit;Ee(u.application.organization.query).then(function(e){var t=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";for(var r in t)"object"===S()(t[r])&&(t[r]=e(t[r],n)),0<=n.indexOf(r)&&"object"===S()(t[r])&&(t[r]=Object.values(t[r]));return t}(e.object,["records","children"]);console.log(t,"我是最终数据"),n("setOrganizationOption",t.records||[])}).catch(function(){})}}},Le=n(109),Ie=n.n(Le),qe=n(158),$e=n.n(qe),Ne=n(159);function Ae(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=[];return e.forEach(function(n,e){r.forEach(function(e,t){e.authKey===n.meta.authKey&&(n.meta.icon=e.icon,n.meta.name=e.name,n.meta.type=e.type,n.children&&0<n.children.length&&(n.children=Ae(r,n.children)),a.push(n))})}),a}function De(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=[];for(var n in e)2==e[n].type&&t.push(e[n]);return t}var Ue=function(){return n.e(10).then(n.bind(null,472))},Fe=[{path:"/",name:"Home",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,468))},redirect:"home",children:[{path:"home",name:"homepage",meta:{authName:"home-page",groupName:"homepage",icon:"icon-home",name:"首页"},component:function(){return n.e(8).then(n.bind(null,470))}}]},{path:"/401",name:"notauth",component:function(){return n.e(9).then(n.bind(null,471))}},{path:"/404",name:"notfound",component:Ue},{path:"*",component:Ue,redirect:"/404"}],Re=function(){return n.e(11).then(n.bind(null,473))},ze=[{path:"/app",component:Re,meta:{authKey:"application-manage",groupName:"appManage",name:"应用管理",icon:"md-settings"},children:[{path:"market",name:"market",meta:{authKey:"application-manage-market",groupName:"appManage",name:"应用市场",icon:"md-person"},component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,465))}},{path:"issue",name:"issue",meta:{authKey:"application-manage-issue",groupName:"appManage",name:"应用发布",icon:"md-person"},component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,467))}}]},{path:"/terminal",component:Re,meta:{authKey:"terminal-manage",groupName:"terminalManage",name:"终端管理",icon:"md-settings"},children:[{path:"account",name:"account",meta:{authKey:"terminal-manage-account",groupName:"terminalManage",name:"终端明细",icon:"md-person"},component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,466))}}]}];function Be(e){if(!Object(y.c)(e))return[];var t=[];for(var n in e)t.push(e[n]);return t}var Ge,Ke={namespaced:!0,state:{permissionList:[],authList:[]},mutations:{setPermission:function(e,t){e.permissionList=t},setAuthArray:function(e,t){e.authList=t}},actions:{FETCH_PERMISSION:(Ge=n.n(Ne)()(Ie.a.mark(function e(t){var n,r,a,o,i,s,c;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,Ee(u.commons.getPermission,"",{showLoading:!0});case 3:a=e.sent,o=Be(a.object.uiPowerMap["terminal-web"]),i=Ae(o,ze),(n=(s=Fe)[0].children).push.apply(n,$e()(i)),P.addRoutes(s),r("setPermission",s),c=De(o),r("setAuthArray",c),console.log(c,"我是操作权限");case 13:case"end":return e.stop()}},e)})),function(e){return Ge.apply(this,arguments)})}};r.default.use(j.a);var He=new j.a.Store({modules:{info:ke,rbac:Ke}});r.default.mixin({methods:{_showErrMsg:function(e,t){var n="";n=e.data&&e.data.errmsg?e.data.errmsg:e.message,e.data&&"public"==e.data.errtype&&(n=t||e.message),n&&A.Message.error({showClose:!0,message:n})},_auth:function(n){return 0<(this.$store.state.rbac.authList||[]).filter(function(e,t){return e.authName==n}).length},_loseSession:function(){A.Message.error({showClose:!0,message:"session失效，重新登录"}),setTimeout(function(){He.commit("info/setUserToken",""),He.commit("rbac/setPermission",[]);var e=P.history.current.path||"";P.push({name:"login",query:{path:e}}),location.reload()},1500)},_asyncDialog:function(e,t,a){var o=this;return(a=_()({mode:"confirm",api:"",params:null,success:null,fail:null,failTip:!0,failClose:!0},a)).api&&o.$api&&(a.beforeClose=function(e,t,n){var r;"confirm"===e?(t.confirmButtonLoading=!0,r="function"==typeof a.params?a.params(t):a.params,o.$api(a.api,r).then(a.success).then(function(){n(),setTimeout(function(){t.confirmButtonLoading=!1},300)}).catch(function(e){a.fail&&a.fail(e),a.failTip&&o._showErrMsg(e),a.failClose&&n(),t.confirmButtonLoading=!1})):n()}),o["$"+a.mode](e,t,a).catch(function(){})}}});var Je=n(48),We=n(60);function Ve(t,e){var n="";return Object(y.a)(e)&&e.findIndex(function(e){if(e.value==t)return n=e.label,!0}),n}function Xe(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return 0<String(e).indexOf(".")&&(e=e.toFixed(t).replace(/\.0+$|0+$/,"")),e}r.default.filter("selectLabel",Ve),r.default.filter("fileType",function(e){return Ve(e,s.typeLabel)}),r.default.filter("fileThumb",function(e,t){switch(t){case"studio":return e||i.cover.studioCourse;case"study":return e||i.cover.studyCourse;default:return e||i.cover.resource}}),r.default.filter("sum",function(e,n){var r=0;return e&&Object(y.a)(e)&&e.forEach(function(e){var t="object"==S()(e)?e[n]:e;r+=parseInt(t)}),r}),r.default.filter("fileStatus",function(e){switch(e){case s.status.trans:return"转码中";case s.status.normal:return"上传成功";case s.status.transFail:return"转码失败";case s.status.uploadFail:return"上传失败";default:return"未知"}}),r.default.filter("dataSource",function(e){switch(e){case 1:return"资源平台";case 2:return"智课堂";case 3:return"MReal"}}),r.default.filter("permission",function(e){switch(e){case 1:return"管理员";case 2:default:return"教师"}}),r.default.filter("numberFixed",Xe),r.default.filter("percentFormat",function(e){var t=Math.min(100*e,100);return isNaN(t)?0:t=Xe(t)}),r.default.filter("priceFormat",function(e,t){var n=Xe(e/100);return t?t+n:n}),r.default.filter("discountFormat",function(e,t){return Xe(e/t*10)+"折"});var Ye=/\n/g;function Ze(){var e=this.getAttribute("data-error-img"),t=this.getAttribute("src");e&&t!=e&&(this.src=e),this.removeEventListener("error",Ze)}r.default.filter("line2br",function(e){return(e||"").replace(Ye,"<br>")}),r.default.filter("size",Je.a),r.default.filter("secondFormat",We.b),r.default.filter("dateFormat",We.a),r.default.filter("prefix",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"0";return Object(N.a)(e,t,n)}),r.default.directive("title",function(e,t){var n;(n=Object(y.a)(t.value)?t.value.slice(0):[t.value]).push(i.title),document.title=n.join("_")}),r.default.directive("error",{bind:function(e,t){e.setAttribute("data-error-img",t.value),e.addEventListener("error",Ze)},unbind:function(e){e.removeEventListener("error",Ze)}});n(363),n(364);r.default.use(a.a),r.default.use(D.a,{size:"medium"}),r.default.use(l),P.beforeEach(function(n,e,r){if(He.state.info.UserToken)if(He.state.rbac.permissionList.length){var t=He.state.rbac.authList||[],a=n.meta.authKey+"-list";0<t.filter(function(e,t){return e.authKey==a}).length||"/401"==n.path||"/home"==n.path||"/404"==n.path||"/login"==n.path?r():r({name:"notauth"}),n.name,r()}else He.dispatch("rbac/FETCH_PERMISSION").then(function(){r({path:n.path})}).catch(function(e){var t=e.data&&e.data.errmsg?e.data.errmsg:"权限获取失败";D.a.Message.error(t),He.commit("info/setUserToken",""),"/login"!=n.path?r({name:"login"}):r()});else"login"===n.name?r():"/"===n.path?r({name:"login"}):r({name:"login",query:{path:n.path}})}),new r.default({el:"#manage",store:He,router:P,render:function(e){return e(d)}})},47:function(e,t){e.exports=element},48:function(e,t,n){"use strict";function r(e,t){if(t=t||"",0===e)return"0"+t+"B";var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toPrecision(3)+t+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}n.d(t,"a",function(){return r})},55:function(e,t,n){"use strict";n.r(t),n.d(t,"parse",function(){return u}),n.d(t,"compose",function(){return l}),n.d(t,"getParam",function(){return m}),n.d(t,"getvar",function(){return f}),n.d(t,"paramToObj",function(){return p}),n.d(t,"parseParam",function(){return d}),n.d(t,"encode",function(){return h}),n.d(t,"join",function(){return g}),n.d(t,"completion",function(){return v});var r,a,o=n(12),s=n.n(o),i=/^(?:([^/]*:)\/\/(?:([^:]*)(?::(.*))?@)?([^:/]+)(:\d+)?)?([^?#]+)?(\?[^#]*)?(#.*)?$/,c=/(.*?)\[(\d+)\]/;function u(e,t){return e=e.toString(),a||"undefined"==typeof document||(a=document.createElement("a")),t&&a?(a.setAttribute("href",e),{protocol:a.protocol,username:decodeURIComponent(a.username),password:decodeURIComponent(a.password),host:a.host,hostname:a.hostname,port:a.port,pathname:a.pathname,search:a.search,hash:a.hash}):function(e){"//"!=e.substr(0,2)&&"://"!=e.substr(0,3)||(e=("undefined"==typeof location?"http:":location.protocol)+e);var t=e.match(i)||[],n={protocol:t[1]||"",username:decodeURIComponent(t[2]||""),password:decodeURIComponent(t[3]||""),host:t[4]||"",hostname:t[4]||"",port:t[5]?t[5].substr(1):"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""};"http:"==n.protocol&&"80"==n.port?n.port="":"https:"==n.protocol&&"443"==n.port&&(n.port="");n.port&&(n.host+=":"+n.port);return n}(e)}function l(e){var t=e.protocol,n=e.username,r=e.password,a=e.host,o=e.pathname,i=e.search,s=e.hash,c="";return t&&(":"==t?t="":t+="//"),(n||r)&&(n&&(c+=encodeURIComponent(n)),r&&(c+=":"+encodeURIComponent(r)),c+="@"),t+c+a+o+i+s}function m(e){return r||(r=p(window.location.href)),e?r[e]:r}function f(e,t){var n=e.split("?");if(2!=n.length)return!1;for(var r=n[1].split("&"),a=r.length-1;0<=a;a--){var o=r[a].split("=");if(o[0]==t)return o[1]}return!1}function p(e){var a={},t=u(e,!0);return t.search&&t.search.substring(t.search.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");if(t[0]){t[1]=t[1]?decodeURIComponent(t[1]):"";var n=t[0].match(c);if(n)void 0===a[n[1]]&&(a[n[1]]=[]),a[n[1]][n[2]]=t[1];else{var r=a[t[0]];a[t[0]]=(r?r+",":"")+t[1]}}}),a}function d(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(null==e)return"";var r="",a=s()(e);if("string"==a||"number"==a||"boolean"==a)r+="&"+t+"="+(n?encodeURIComponent(e):e);else for(var o in e){var i=null==t?o:t+(e instanceof Array?"["+o+"]":"."+o);r+=d(e[o],i,n)}return r}function h(){var e=d.apply(this,arguments);return"&"==e.substr(0,1)&&(e=e.substring(1)),e}function g(e,t){if(!t)return e;var n="";if(!(n="string"==typeof t?t:h(t)))return e;var r=u(e);return r.search+=(-1==r.search.indexOf("?")?"?":"&")+n,l(r)}function v(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";n||(n=" https://www.easy-mock.com/mock/5cbd1d90d025f46f6690ae11/api-mp".replace(/([^:])\/{2,}/g,"$1/"));var r=u(e),a=r.pathname.indexOf(":");-1<a&&a<=7&&(r.pathname=r.pathname.substring(a+1)),r.protocol&&":"!=r.protocol||(r.pathname=(n+r.pathname).replace(/\/{2,}/,"/"));var o="";return(o="string"==typeof t?t:h(t))&&(r.search+=(-1==r.search.indexOf("?")?"?":"&")+o),l(r)}},60:function(e,t,n){"use strict";function r(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";return e&&(e=(t=e)?t instanceof Date?t:(t=t.toString().replace("T"," "),t=/^(\d{10}|\d{13})$/g.test(t)?new Date(parseInt(10==t.length?1e3*t:t)):new Date(t.replace(/-/g,"/")),isNaN(t.getDate())?null:t):null)?i(n,{y:e.getFullYear()+"",M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),q:Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds(),W:["日","一","二","三","四","五","六"][e.getDay()]}):""}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[hh:]mm:ss";return e=parseInt(e),isNaN(e)?"":i(t,{h:Math.floor(e/3600),m:Math.floor(e/60%60),s:Math.floor(e%60)})}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=/\[(([yMdhmsqSW])+)(.*?)\]|(([yMdhmsqSW])+)/g;function i(e,u){return e&&u?e.replace(o,function(e,t,n,r,a,o){var i=n||o,s=t||a,c=u[i];return void 0!==c?t&&!c?"":"y"===i?c.substr(4-s.length)+(r||""):(1<s.length&&(c=(c="0"+c).substr(c.length-2)),c+(r||"")):e}):""}},73:function(e,t,n){},74:function(e,t,n){},77:function(e,t,n){e.exports=n(47)(21)}});