(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{408:function(t,e,a){},409:function(t,e,a){"use strict";var i=a(13),l=a.n(i),s=a(76),o=a.n(s);e.a={data:function(){return{TABLE_CONFIG:{field:{id:"id"},api:{query:"",delete:""}},filter:{currPage:1,pageSize:15,sort:""},autoLoad:!0,loading:!0,listData:[],totalCount:0,pickedId:[],usePage:!0,useRouterQuery:!1}},beforeRouteUpdate:function(t,e,a){if(this.useRouterQuery){var i=t.query.page||1;this.filter.currPage=parseInt(i),this.fetchData(),a()}else a()},methods:{fetchData:function(t,e){var a=this;this.TABLE_CONFIG.api.query&&(!t&&this.loading||(this.beforeFetch&&this.beforeFetch(),e=l()({},this.filter,e),this.loading=!0,this.$api(this.TABLE_CONFIG.api.query,e,{showLoading:!0}).then(function(t){a.loading=!1,a.filter=e,a.parseData(t.object),a.afterFetch&&a.afterFetch(t.object)}).catch(function(t){a.loading=!1,a._showErrMsg(t)})))},parseData:function(t){this.usePage?(this.listData=t.records,this.totalCount=t.total):(this.listData=t,this.totalCount=t.length)},deleteData:function(t,e){if(this.TABLE_CONFIG.api.delete){var a=this,i=[],s="确定删除该条数据么?";if(t?i.push(t):(i=a.pickedId,s="确定删除选中的数据么?"),!i.length)return a.$message.warning("未选择任何数据"),!1;var o=l()({},e);o[a.TABLE_CONFIG.field.id]=i.join(","),a._asyncDialog(s,"警告",{confirmButtonText:"删除",type:"warning",confirmButtonClass:"el-button--danger",api:a.TABLE_CONFIG.api.delete,params:o,success:function(){a.$message({message:"删除成功",type:"success"}),a.usePage?a.fetchData():a.__delListData(i)}})}},__delListData:function(a){var i=this;this.listData.forEach(function(t,e){~a.indexOf(t[i.TABLE_CONFIG.field.id])&&i.listData.splice(e,1)})},selectRow:function(t){var e=this,a=[];t.forEach(function(t){a.push(t[e.TABLE_CONFIG.field.id])}),this.pickedId=a},sortData:function(t){t.order?this.filter.sort="ascending"==t.order?2:1:this.filter.sort="",this.fetchData()},pageChange:function(t){if(this.beforePageChange&&this.beforePageChange(t),this.useRouterQuery){var e=this.$route;if((e.query.page||1)==this.filter.currPage)return;var a={name:e.name,meta:l()({},e.meta),params:l()({},e.params),query:l()({},e.query)};a.query.page=t,e.name||(a.path=e.path),this.$router.push(a)}else this.fetchData();this.afterPageChange&&this.afterPageChange(t)},pushData:function(t){this.listData.unshift(t),this.listData.splice(this.filter.pageSize),this.totalCount++},updateData:function(i){var s=this,o=-1;this.listData.forEach(function(t,e){var a=t[s.TABLE_CONFIG.field.id];a&&a==i[s.TABLE_CONFIG.field.id]&&(o=e)}),-1!=o&&this.$set(this.listData,o,i)},filterChangeHandle:function(){this.beforeFilterChangeHandle&&this.beforeFilterChangeHandle(),this.fetchDataHandle(!1,{currPage:1})}},created:function(){this.fetchDataHandle=o()(this.fetchData,200);var t=this.$route.query.page;t&&(this.filter.currPage=parseInt(t)),this.autoLoad&&this.fetchData(!0)}}},410:function(t,e,a){"use strict";var i=a(408);a.n(i).a},411:function(t,e,a){"use strict";var i=a(13),s=a.n(i);e.a={data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{info:"",add:"",edit:""}},id:0,inited:!1,formData:{},rules:{},dialogShow:!1,loading:!1,hasEdited:!1,saving:!1,labelWidth:"7em",unEdit:!1}},computed:{title:function(){return this.id?"编辑":"添加"}},watch:{formData:{handler:function(){this.inited&&(this.hasEdited=!0)},deep:!0}},methods:{show:function(t,e,a){this.id=t||0,this.unEdit=a||!1,this.dialogShow=!0,e?this.setFormData(e):this.id?this.fetchData():this.setFormData(this._defaultFormData)},close:function(t){var e=this;this.hasEdited?this.$confirm("表单未保存，确定要关闭吗？","警告",{confirmButtonText:"关闭",cancelButtonText:"点错了",type:"warning"}).then(function(){e.closeHandle(),"function"==typeof t&&t()}).catch(function(){}):(this.closeHandle(),"function"==typeof t&&t())},closeHandle:function(){this.dialogShow=!1,this.resetTimer=setTimeout(this.reset,300)},fetchData:function(){var e=this;if(this.FORM_CONFIG.api.info&&!this.loading){var t={};t[this.FORM_CONFIG.field.id]=this.id,this.loading=!0,this.$api(this.FORM_CONFIG.api.info,t).then(function(t){e.setFormData(t.object),e.loading=!1}).catch(function(t){e.loading=!1,e._showErrMsg(t)})}},setFormData:function(t){var e=this;this.formData=s()(!0,{},t),this.onSetFormData&&this.onSetFormData(),this.$nextTick(function(){e.inited=!0,e.$refs.form.clearValidate()})},save:function(){var e=this;this.saving||this.$refs.form.validate(function(t){t&&e.post()})},post:function(){var e=this,a=this.id?"edit":"add",t=this.FORM_CONFIG.api[a];if(t&&(!this.beforeSave||!1!==this.beforeSave())){this.saving=!0;var i=this.parsePostData?this.parsePostData():this.formData;this.$api(t,i).then(function(t){e.$emit(a,t.object),e.saving=!1,e.hasEdited=!1,e.$message.success("保存成功"),e.close(),e.onSuccess&&e.onSuccess(t)}).catch(function(t){e._showErrMsg(t),e.saving=!1,e.onFail&&e.onFail(t)})}},reset:function(){clearTimeout(this.resetTimer),this.inited=!1,this.hasEdited=!1;var t=this.$refs.form;t&&t.resetFields()}},created:function(){this._defaultFormData=s()(!0,{},this.formData)}}},412:function(t,e,a){"use strict";var i=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"ui-bread-crumb"},[i("el-breadcrumb",a._l(a.data,function(t,e){return i("el-breadcrumb-item",{key:e},[a._v(a._s(t))])}),1)],1)};i._withStripped=!0;var s={props:{data:{type:Array,default:function(){return[]}}}},o=(a(410),a(46)),l=Object(o.a)(s,i,[],!1,null,null,null);l.options.__file="src/components/manage/common/bread-crumb.vue";e.a=l.exports},413:function(t,e,a){},422:function(t,e,a){"use strict";var i=a(413);a.n(i).a},423:function(t,e,a){},424:function(t,e,a){},425:function(t,e,a){},426:function(t,e,a){},427:function(t,e,a){},428:function(t,e,a){},429:function(t,e,a){},430:function(t,e,a){},439:function(t,e,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"ui-file-upload-dialog ui-form",attrs:{title:e.title,visible:e.dialogShow,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.close,width:"500px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("el-upload",{ref:"upload",staticClass:"ui-file-upload",attrs:{multiple:e.options.multiple,action:e.options.urlPath||"",name:e.options.name,drag:e.options.drag,format:e.options.format,"file-list":e.readyFiles,"auto-upload":e.options.autoUpload,data:e.extraData,"before-upload":e.beforeUpload,"on-change":e.handleChange,"on-error":e.handleError,"on-success":e.handleSuccess}},[a("div",{ref:"pickup",staticClass:"area"},[a("div",{staticClass:"shade"},[a("i",{staticClass:"iconfont icon-upload"}),e._v(" "),a("p",{staticClass:"text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("p",{staticClass:"tip",domProps:{innerHTML:e._s(e.tip)}})])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.loadingStatus},on:{click:e.submitUpload}},[e._v("上 传")])],1)],1)};i._withStripped=!0;var s=a(13),o=a.n(s),r=a(48),l={multiple:!1,autoUpload:!1,maxSize:10240,format:[],drag:!0,name:"file",urlPath:""},n={props:{option:{type:Object,default:function(){return{}}}},data:function(){return{dialogShow:!1,loadingStatus:!1,title:"文件上传",options:{},readyFiles:[],extraData:{},address:""}},computed:{tip:function(){var t=this.options.format,e=(this.options.maxSize,t&&t.length?t.join(","):""),a=Object(r.a)(1024*this.options.maxSize," ");return"(请上传<span class='format-tip'>".concat(e,"</span>格式的文件,大小不超过 ").concat(a,")")}},methods:{show:function(){var t=this;t.dialogShow=!0,t.option.format=t.option.format?t.option.format:t.$cfg.FILE.excel,t.options=o()({},l,t.option)},close:function(){this.dialogShow=!1,this.reset()},handleChange:function(t,e){if(!t.percentage){var a=this,i=t.name;a.readyFiles=[];var s=t.name.substring(t.name.lastIndexOf(".")+1);if(!(a.options.format||[]).includes(s))return a.$message.error("文件 ".concat(i," 格式错误")),a.reset(),!1;var o=t.size/1024,l=a.options.maxSize,n=Object(r.a)(1024*this.options.maxSize," ");if(l<o)return a.$message.error("文件 ".concat(i," 大小超过").concat(n)),a.reset(),!1;a.readyFiles.push(t)}},beforeUpload:function(t){this.loadingStatus=!0},submitUpload:function(){var t=this;if(t.readyFiles.length){var e=t.readyFiles[0];t.loadBegin(),t.$emit("parseapk",e)}else t.$message.warning("请选择文件")},getUploadSign:function(t){var i=this,e=this.readyFiles[0].name,a="platform/terminal-manager/app/".concat(t,"/").concat(e);this.$api(this.$cfg.API.commons.getUploadSign,{filename:a}).then(function(t){var e=i,a=t.object||{};e.options.urlPath=a.host,e.address=a.url,e.extraData.OSSAccessKeyId=a.accessKeyID,e.extraData.policy=a.policy,e.extraData.signature=a.signature,e.extraData.key=a.key,e.extraData.success_action_status=200,setTimeout(function(){e.$refs.upload.submit()},500)}).catch(function(t){i._showErrMsg(t,"获取签名失败"),i.loadingStatus=!1})},handleError:function(t,e,a){this.$message.error("上传出错"),this.loadingStatus=!1,this.reset()},handleSuccess:function(t,e,a){var i=this;i.$message.success("上传成功"),setTimeout(function(){i.close()},800),i.$emit("done",e,i.address)},loadBegin:function(){this.loadingStatus=!0},loadEnd:function(){this.loadingStatus=!1},reset:function(){this.preview=!1,this.loadingStatus=!1,this.readyFiles=[],this.$refs.upload.clearFiles()}}},c=(a(422),a(46)),d=Object(c.a)(n,i,[],!1,null,null,null);d.options.__file="src/components/manage/common/file-upload.vue";e.a=d.exports},448:function(t,e,a){t.exports=a.p+"static/img/3c8d72d5c60e83dd2e323d9f2f4b2f3c.png"},449:function(t,e,a){"use strict";var i=a(423);a.n(i).a},450:function(t,e,a){"use strict";var i=a(424);a.n(i).a},451:function(t,e,a){"use strict";var i=a(425);a.n(i).a},452:function(t,e,a){"use strict";var i=a(426);a.n(i).a},453:function(t,e,a){"use strict";var i=a(427);a.n(i).a},454:function(t,e,a){"use strict";var i=a(428);a.n(i).a},455:function(t,e,a){"use strict";var i=a(429);a.n(i).a},456:function(t,e,a){"use strict";var i=a(430);a.n(i).a},465:function(t,e,a){"use strict";a.r(e);var i=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{directives:[{name:"title",rawName:"v-title",value:a.pageTitle,expression:"pageTitle"}],staticClass:"c-m-application-market ui-box"},[i("bread-crumb",{attrs:{data:a.crumbData}}),a._v(" "),i("search",{staticClass:"ui-search",attrs:{data:a.filter},on:{filterchange:a.filterChangeHandle}},[i("el-button",{staticClass:"ui-skin-btn ui-front-btn",attrs:{slot:"addbtn",type:"primary",icon:"iconfont icon-add",size:"medium"},on:{click:a.showAppAdd},slot:"addbtn"},[a._v("新增应用")])],1),a._v(" "),i("div",{staticClass:"ui-app-market-content"},[i("ul",{directives:[{name:"show",rawName:"v-show",value:!a.nodata,expression:"!nodata"}],staticClass:"ui-app-list-box c"},a._l(a.listData,function(e,t){return i("app-list",{key:t,attrs:{item:e,gap:15},on:{showverison:function(t){return a.showVersionTable(e)},showdetail:function(t){return a.showDetailDialog(e)},showedit:function(t){return a.showAppEdit(e)},showversionadd:a.shwoVersionAdd}})}),1),a._v(" "),i("no-data",{directives:[{name:"show",rawName:"v-show",value:a.nodata,expression:"nodata"}],attrs:{message:a.nodataMsg}})],1),a._v(" "),i("div",{staticClass:"ui-page"},[i("el-pagination",{attrs:{"page-size":a.filter.pageSize,"current-page":a.filter.currPage,layout:"total, prev, pager, next, jumper",total:a.totalCount},on:{"current-change":a.pageChange,"update:currentPage":function(t){return a.$set(a.filter,"currPage",t)},"update:current-page":function(t){return a.$set(a.filter,"currPage",t)}}})],1),a._v(" "),i("version-table",{ref:"versiontable"}),a._v(" "),i("detail-dialog",{ref:"detaildialog"}),a._v(" "),i("app-form",{ref:"appform",on:{add:a.fetchData,edit:a.fetchData}}),a._v(" "),i("version-add-form",{ref:"versionappform"})],1)};i._withStripped=!0;var s=a(412),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-market-search search-bar"},[a("el-row",{attrs:{gutter:15}},[e._t("addbtn"),e._v(" "),a("el-col",{attrs:{xs:8,sm:5,lg:5,xl:3}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"请输入应用名搜索"},on:{change:e.filterFecth},model:{value:e.data.appName,callback:function(t){e.$set(e.data,"appName",t)},expression:"data.appName"}})],1),e._v(" "),a("el-col",{attrs:{xs:8,sm:5,lg:5,xl:3}},[a("el-input",{attrs:{"suffix-icon":"el-icon-search",clearable:"",placeholder:"请输入类别名搜索"},on:{change:e.filterFecth},model:{value:e.data.type,callback:function(t){e.$set(e.data,"type",t)},expression:"data.type"}})],1)],2)],1)};o._withStripped=!0;var l={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{filterFecth:function(){this.$emit("filterchange")}}},n=a(46),r=Object(n.a)(l,o,[],!1,null,null,null);r.options.__file="src/components/manage/application/market/search.vue";var c=r.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"c-m-app-grid c",style:{width:t.width}},[a("div",{staticClass:"grid-item",class:{action:t.action},style:{"margin-left":t.gap+"px","margin-right":t.gap+"px"}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"thumb"},[a("img",{directives:[{name:"error",rawName:"v-error",value:t.defaultThumb,expression:"defaultThumb"}],attrs:{src:t.item.picture||t.defaultThumb,alt:t.item.fileName}})]),t._v(" "),t.action?a("div",{staticClass:"caption",on:{click:function(t){t.stopPropagation()}}},[a("h4",[t._v(t._s(t.item.appName))]),t._v(" "),a("div",{staticClass:"tool"},[a("a",{staticClass:"upload",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"iconfont icon-upload",on:{click:t.showVersionAdd}})]),t._v(" "),a("a",{staticClass:"edit",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"iconfont icon-edit-bold",on:{click:t.showAppEdit}})])]),t._v(" "),a("div",{staticClass:"detail"},[a("div",{staticClass:"size"},[t._v(t._s(t._f("size")(t.item.size)))]),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(t.item.appDes||"暂无简介"))]),t._v(" "),a("div",{staticClass:"handle"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDetail}},[t._v("详情")]),t._v(" "),a("span",{staticClass:"more-right",attrs:{type:"text",size:"mini"},on:{click:t.showMore}},[t._v("全部版本")])],1)])]):a("div",{staticClass:"caption"},[a("h4",[t._v(t._s(t.item.appName||"暂无应用名"))]),t._v(" "),a("div",{staticClass:"detail"},[a("p",{staticClass:"desc"},[t._v(t._s(t.item.appDes||"暂无简介"))])])])]),t._v(" "),a("div",{staticClass:"info"},[a("span",{staticClass:"item status"},[a("i",{staticClass:"iconfont icon-authcode"}),t._v("\n\t\t\t\t"+t._s(t.item.charge)+"\n\t\t\t")]),t._v(" "),a("span",{staticClass:"item date"},[a("i",{staticClass:"iconfont icon-clock"}),t._v("\n\t\t\t\t"+t._s(t._f("dateFormat")(t.item.versionModifyTime))+"\n\t\t\t")])])])])};d._withStripped=!0;var p=a(448),u={props:{data:{type:Array,default:function(){return[]}},item:{type:Object,default:function(){return{}}},grid:{type:Number,default:6},gap:{type:Number,default:10},max:{type:Number,default:0},action:{type:Boolean,default:!0}},computed:{width:function(){return Math.floor(1e4/this.grid)/100+"%"}},data:function(){return{defaultThumb:p}},methods:{showMore:function(){this.$emit("showverison")},showDetail:function(){this.$emit("showdetail")},showAppEdit:function(){this.$emit("showedit")},showVersionAdd:function(){this.$emit("showversionadd")}}},f=(a(449),Object(n.a)(u,d,[],!1,null,null,null));f.options.__file="src/components/manage/application/market/app-grid.vue";var m=f.exports,v=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",[i("el-dialog",{staticClass:"ui-version-list-table-dialog ui-form",attrs:{title:a.title,visible:a.visible,"lock-scroll":!1,"before-close":a.close,width:"80%"},on:{"update:visible":function(t){a.visible=t}}},[i("div",{staticClass:"sub-title"},[i("div",{staticClass:"fields-name"},[a._v("应用名")]),a._v(" "),i("div",{staticClass:"fields-dev"},[a._v("开发商")]),a._v(" "),i("div",{staticClass:"fields-size"},[a._v("大小")]),a._v(" "),i("div",{staticClass:"fields-type"},[a._v("类别")]),a._v(" "),i("div",{staticClass:"fields-version"},[a._v("版本号")]),a._v(" "),i("div",{staticClass:"fields-price"},[a._v("价格")]),a._v(" "),i("div",{staticClass:"fields-updateTime"},[a._v("更新时间")]),a._v(" "),i("div",{staticClass:"fields-handle"},[a._v("操作")])]),a._v(" "),a._l(a.listData,function(e,t){return i("version-item",{key:t,attrs:{item:e},on:{showdetail:function(t){return a.showDetailDialog(e)},showversionedit:function(t){return a.showVersionEdit(e)}}})}),a._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:a.close}},[a._v("取消")])],1)],2),a._v(" "),i("detail-dialog",{ref:"detaildialog"}),a._v(" "),i("version-edit-form",{ref:"versioneditform",on:{edit:a.fetchData}})],1)};v._withStripped=!0;var h=a(409),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fields-item"},[a("div",{staticClass:"view-model"},[a("div",{staticClass:"fields-name"},[a("span",{staticClass:"fields-name-logo"},[a("img",{attrs:{src:e.item.picture,alt:""}})]),e._v(" "),a("span",[e._v(e._s(e.item.appName))])]),e._v(" "),a("div",{staticClass:"fields-dev"},[a("span",[e._v(e._s(e.item.copyright))])]),e._v(" "),a("div",{staticClass:"fields-size"},[a("span",[e._v(e._s(e._f("size")(e.item.size)))])]),e._v(" "),a("div",{staticClass:"fields-type"},[a("span",[e._v(e._s(e.item.type))])]),e._v(" "),a("div",{staticClass:"fields-version"},[a("span",[e._v(e._s(e.item.version))])]),e._v(" "),a("div",{staticClass:"fields-price"},[a("span",[e._v(e._s(e.item.charge))])]),e._v(" "),a("div",{staticClass:"fields-updateTime"},[a("span",[e._v(e._s(e.item.versionModifyTime))])]),e._v(" "),a("div",{staticClass:"fields-handle fields-handle-item",on:{click:function(t){t.stopPropagation()}}},[a("i",{staticClass:"el-icon-more"}),e._v(" "),a("ul",{staticClass:"dropmenu"},[a("li",[a("span",{staticClass:"detail-li",on:{click:function(t){return e.$emit("showdetail")}}},[a("i",{staticClass:"iconfont icon-issue"}),e._v("详情\n\t\t\t\t\t")])]),e._v(" "),a("li",[a("span",{staticClass:"edit-li",on:{click:function(t){return e.$emit("showversionedit")}}},[a("i",{staticClass:"iconfont icon-edit-bold"}),e._v("编辑\n\t\t\t\t\t")])]),e._v(" "),a("li",[a("a",{staticClass:"download-li",attrs:{href:e.item.address,download:e.item.appName+".apk"}},[a("i",{staticClass:"iconfont icon-download"}),e._v("下载\n\t\t\t\t\t")])])])])])])};_._withStripped=!0;var g={props:{item:{type:Object,default:function(){return{}}}},data:function(){return{}}},b=Object(n.a)(g,_,[],!1,null,null,null);b.options.__file="src/components/manage/application/market/more/version-item.vue";var D=b.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"ui-application-detail-dialog ui-form",attrs:{title:e.title,visible:e.visible,"lock-scroll":!1,"show-close":!1,"before-close":e.close,width:"520px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"app-detail-title"},[e._v(e._s(e.detailData.appName))]),e._v(" "),a("i",{staticClass:"iconfont icon-delete1",on:{click:e.close}})]),e._v(" "),a("div",{staticClass:"app-detail-content c"},[a("div",{staticClass:"box c"},[a("div",{staticClass:"label"},[e._v("版本：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.version))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label"},[e._v("类别：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.type))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("大小：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e._f("size")(e.detailData.size)))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("价格：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.charge))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("应用说明：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.appDes))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("版本说明：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.versionDes))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("兼容系统：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.compatibleOperatingSystem))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("兼容机型：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.compatibleTerminalModel))])]),e._v(" "),a("div",{staticClass:"box c"},[a("div",{staticClass:"label",attrs:{for:""}},[e._v("版权：")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.detailData.copyright))])])])])};C._withStripped=!0;var w={data:function(){return{title:"详情",visible:!1,detailData:{}}},methods:{show:function(t){this.visible=!0,this.detailData=t},close:function(){this.visible=!1}}},y=(a(450),Object(n.a)(w,C,[],!1,null,null,null));y.options.__file="src/components/manage/application/market/detail-dialog.vue";var x=y.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"ui-application-edit-version-dialog ui-form",attrs:{title:e.title,visible:e.dialogShow,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.close,width:"450px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"应用级别",prop:"level"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择应用级别"},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}},e._l(e.levelOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"兼容机型",prop:"level"}},[a("el-select",{attrs:{clearable:"",placeholder:"兼容机型"},model:{value:e.formData.compatibleTerminalModel,callback:function(t){e.$set(e.formData,"compatibleTerminalModel",t)},expression:"formData.compatibleTerminalModel"}},e._l(e.terminalModelOption,function(t){return a("el-option",{key:t.modelId,attrs:{label:t.modelName,value:t.modelId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"版权方",prop:"copyright"}},[a("el-input",{model:{value:e.formData.copyright,callback:function(t){e.$set(e.formData,"copyright",t)},expression:"formData.copyright"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"兼容系统",prop:"compatibleOperatingSystem"}},[a("el-input",{model:{value:e.formData.compatibleOperatingSystem,callback:function(t){e.$set(e.formData,"compatibleOperatingSystem",t)},expression:"formData.compatibleOperatingSystem"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本说明",prop:"versionDes"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formData.versionDes,callback:function(t){e.$set(e.formData,"versionDes",t)},expression:"formData.versionDes"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.saving,loading:e.saving},on:{click:e.save}},[e._v("保 存")])],1)],1)],1)};k._withStripped=!0;var $=a(411),O={mixins:[$.a],data:function(){return{fileOption:{maxSize:102400,format:["apk"],tip:"请上传APK文件,大小不超过100M"},FORM_CONFIG:{field:{id:"id"},api:{edit:this.$cfg.API.application.market.editVersion}},formData:{appName:"",size:"",picture:"",version:"",level:"",copyright:"",compatibleOperatingSystem:"",compatibleTerminalModel:"",versionDes:"",address:""},levelOption:this.$cfg.VAR.levelOption,terminalModelOption:[]}},methods:{fetchTerminalOption:function(){var e=this;e.terminalModelOption&&e.terminalModelOption.length||this.$api(this.$cfg.API.application.model.query,{currPage:1,pageSize:1e3}).then(function(t){e.terminalModelOption=t.object.records}).catch(function(){})}}},S=(a(451),Object(n.a)(O,k,[],!1,null,null,null));S.options.__file="src/components/manage/application/market/more/version-edit-form.vue";var F=S.exports,N={mixins:[h.a],components:{VersionItem:D,DetailDialog:x,VersionEditForm:F},data:function(){return{title:"全部版本",visible:!1,TABLE_CONFIG:{field:{id:"noticeId"},api:{query:this.$cfg.API.application.market.queryAll}},filter:{appName:""},autoLoad:!1}},methods:{show:function(t){this.filter.appName=t.appName,this.fetchData(!0,{currPage:1})},close:function(){this.visible=!1},afterFetch:function(){var a=this;if(a.listData&&a.listData.length){var t=Object.values(a.listData[0].version_feature);t.forEach(function(t,e){t.appName=a.listData[0].appName,t.charge=a.listData[0].charge,t.type=a.listData[0].type,t.appDes=a.listData[0].appDes,t.createTime=a.listData[0].createTime}),a.listData=t,console.log(a.listData,"格式化之后的数据")}a.visible=!0},showDetailDialog:function(t){this.$refs.detaildialog.show(t)},showVersionEdit:function(t){this.$refs.versioneditform.show(1,t),this.$refs.versioneditform.fetchTerminalOption()}}},T=(a(452),Object(n.a)(N,v,[],!1,null,null,null));T.options.__file="src/components/manage/application/market/more/version-list-table.vue";var A=T.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-nodata",class:[t.mode]},[a("i",{staticClass:"iconfont icon-nodata"}),t._v(" "),a("div",{staticClass:"tip",domProps:{innerHTML:t._s(t.message)}})])};E._withStripped=!0;var I={props:{mode:String,message:{type:String,default:"抱歉！暂无该类资源<p>您可以尝试更换搜索条件或上传资源</p>"}}},M=(a(453),Object(n.a)(I,E,[],!1,null,null,null));M.options.__file="src/components/manage/common/nodata.vue";var z=M.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"ui-application-handle-dialog ui-form",attrs:{title:e.title,visible:e.dialogShow,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.close,width:"450px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"应用名称",prop:"appName"}},[a("el-input",{attrs:{placeholder:"请输入应用名称"},model:{value:e.formData.appName,callback:function(t){e.$set(e.formData,"appName",t)},expression:"formData.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用类别",prop:"type"}},[a("el-input",{attrs:{placeholder:"请输入应用类别"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用说明",prop:"appDes"}},[a("el-input",{attrs:{placeholder:"请输入应用说明",rows:"3",maxlength:"500","show-word-limit":"",type:"textarea"},model:{value:e.formData.appDes,callback:function(t){e.$set(e.formData,"appDes",t)},expression:"formData.appDes"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.saving,loading:e.saving},on:{click:e.save}},[e._v("保 存")])],1)],1)};P._withStripped=!0;var j={mixins:[$.a],data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{add:this.$cfg.API.application.market.add,edit:this.$cfg.API.application.market.edit}},formData:{appName:"",type:"",appDes:""},rules:{appName:[{required:!0,message:"请填写应用名称",trigger:"blur"}]}}},methods:{}},L=(a(454),Object(n.a)(j,P,[],!1,null,null,null));L.options.__file="src/components/manage/application/market/app-form.vue";var B=L.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"ui-application-handle-dialog ui-form",attrs:{title:e.title,visible:e.dialogShow,"lock-scroll":!1,"close-on-click-modal":!1,"before-close":e.close,width:"450px"},on:{"update:visible":function(t){e.dialogShow=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"应用级别",prop:"level"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择应用级别"},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}},e._l(e.levelOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"兼容机型",prop:"level"}},[a("el-select",{attrs:{clearable:"",placeholder:"兼容机型"},model:{value:e.formData.compatibleTerminalModel,callback:function(t){e.$set(e.formData,"compatibleTerminalModel",t)},expression:"formData.compatibleTerminalModel"}},e._l(e.terminalModelOption,function(t){return a("el-option",{key:t.modelId,attrs:{label:t.modelName,value:t.modelId}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"ui-app-upload-form",attrs:{label:"应用上传",prop:"address"}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.showAppUpload}},[e._v("上传")])],1),e._v(" "),a("el-form-item",{attrs:{label:"版权方",prop:"copyright"}},[a("el-input",{model:{value:e.formData.copyright,callback:function(t){e.$set(e.formData,"copyright",t)},expression:"formData.copyright"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"兼容系统",prop:"compatibleOperatingSystem"}},[a("el-input",{model:{value:e.formData.compatibleOperatingSystem,callback:function(t){e.$set(e.formData,"compatibleOperatingSystem",t)},expression:"formData.compatibleOperatingSystem"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本说明",prop:"versionDes"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formData.versionDes,callback:function(t){e.$set(e.formData,"versionDes",t)},expression:"formData.versionDes"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.saving,loading:e.saving},on:{click:e.save}},[e._v("保 存")])],1)],1),e._v(" "),a("app-upload",{ref:"appupload",attrs:{option:e.fileOption},on:{parseapk:e.parseApk,done:e.done}})],1)};G._withStripped=!0;a(19);var V=a(439),q=a(405),R={mixins:[$.a],components:{AppUpload:V.a},data:function(){return{fileOption:{maxSize:102400,format:["apk"],tip:"请上传APK文件,大小不超过100M"},FORM_CONFIG:{field:{id:"id"},api:{add:this.$cfg.API.application.market.addVersion,edit:this.$cfg.API.application.market.editVersion}},formData:{appName:"",size:"",picture:"",version:"",level:"",copyright:"",compatibleOperatingSystem:"",compatibleTerminalModel:"",versionDes:"",address:""},levelOption:this.$cfg.VAR.levelOption,terminalModelOption:[],rules:{address:[{required:!0,message:"请上传应用",trigger:"blur"}]}}},methods:{fetchTerminalOption:function(){var e=this;e.terminalModelOption&&e.terminalModelOption.length||this.$api(this.$cfg.API.application.model.query,{currPage:1,pageSize:1e3}).then(function(t){e.terminalModelOption=t.object.records}).catch(function(){})},showAppUpload:function(){this.$refs.appupload.show()},parseApk:function(t){var a=this;a.parser=new q(t.raw),a.parser.parse().then(function(t){var e=t||{};a.formData.appName=e.application.label[0],a.formData.picture=e.icon,a.formData.version=e.versionName,a.$refs.appupload.getUploadSign(a.formData.appName)}).catch(function(t){a.$refs.appupload.loadEnd(),a.$message.error("获取apk信息失败")})},done:function(t,e){var a=t.size;this.formData.address=e,this.formData.size=a}}},U=(a(455),Object(n.a)(R,G,[],!1,null,null,null));U.options.__file="src/components/manage/application/market/more/version-add-form.vue";var H=U.exports,K={mixins:[h.a],components:{BreadCrumb:s.a,Search:c,AppList:m,VersionTable:A,DetailDialog:x,AppForm:B,VersionAddForm:H,NoData:z},data:function(){return{pageTitle:"应用市场",nodataMsg:"暂时没有您需要的App!<p>可以去其他页面逛逛哦!</p>",crumbData:["应用管理","应用市场"],filter:{pageSize:18,appName:"",type:""},TABLE_CONFIG:{field:{id:"noticeId"},api:{query:this.$cfg.API.application.market.query}}}},computed:{nodata:function(){return!(this.listData||this.listData.length||loading)}},methods:{showAppAdd:function(){this.$refs.appform.show()},showAppEdit:function(t){this.$refs.appform.show(t.id,t)},showVersionTable:function(t){this.$refs.versiontable.show(t)},showDetailDialog:function(t){this.$refs.detaildialog.show(t)},shwoVersionAdd:function(){this.$refs.versionappform.show(),this.$refs.versionappform.fetchTerminalOption()}}},Q=(a(456),Object(n.a)(K,i,[],!1,null,null,null));Q.options.__file="src/components/manage/application/market/index.vue";e.default=Q.exports}}]);