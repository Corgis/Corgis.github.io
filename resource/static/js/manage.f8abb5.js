!function(l){function t(t){for(var e,a,r=t[0],n=t[1],o=t[2],s=0,i=[];s<r.length;s++)a=r[s],m[a]&&i.push(m[a][0]),m[a]=0;for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(l[e]=n[e]);for(f&&f(t);i.length;)i.shift()();return u.push.apply(u,o||[]),c()}function c(){for(var t,e=0;e<u.length;e++){for(var a=u[e],r=!0,n=1;n<a.length;n++){var o=a[n];0!==m[o]&&(r=!1)}r&&(u.splice(e--,1),t=h(h.s=a[0]))}return t}var a={},d={2:0},m={2:0},u=[];function h(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,h),e.l=!0,e.exports}h.e=function(u){var t=[];d[u]?t.push(d[u]):0!==d[u]&&{3:1,4:1,5:1}[u]&&t.push(d[u]=new Promise(function(t,r){for(var e="static/css/"+({}[u]||u)+".f8abb5.css",n=h.p+e,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=(l=a[o]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===e||s===n))return t()}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){var l;if((s=(l=i[o]).getAttribute("data-href"))===e||s===n)return t()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=t,c.onerror=function(t){var e=t&&t.target&&t.target.src||n,a=new Error("Loading CSS chunk "+u+" failed.\n("+e+")");a.request=e,delete d[u],c.parentNode.removeChild(c),r(a)},c.href=n,document.getElementsByTagName("head")[0].appendChild(c)}).then(function(){d[u]=0}));var e,a=m[u];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise(function(t,e){a=m[u]=[t,e]});t.push(a[2]=r);var n,o=document.createElement("script");o.charset="utf-8",o.timeout=120,h.nc&&o.setAttribute("nonce",h.nc),o.src=h.p+"static/js/"+({}[e=u]||e)+".f8abb5.js",n=function(t){o.onerror=o.onload=null,clearTimeout(s);var e=m[u];if(0!==e){if(e){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,n=new Error("Loading chunk "+u+" failed.\n("+a+": "+r+")");n.type=a,n.request=r,e[1](n)}m[u]=void 0}};var s=setTimeout(function(){n({type:"timeout",target:o})},12e4);o.onerror=o.onload=n,document.head.appendChild(o)}return Promise.all(t)},h.m=l,h.c=a,h.d=function(t,e,a){h.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},h.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(e,t){if(1&t&&(e=h(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(h.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)h.d(a,r,function(t){return e[t]}.bind(null,r));return a},h.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return h.d(e,"a",e),e},h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},h.p="/resource/",h.oe=function(t){throw console.error(t),t};var e=window.webpackJsonp=window.webpackJsonp||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var n=0;n<e.length;n++)t(e[n]);var f=r;u.push([385,0]),c()}({121:function(t,e,a){t.exports=a(40)(0)},14:function(t,e,a){"use strict";a.d(e,"b",function(){return s}),a.d(e,"a",function(){return i});var r=a(19),n=a.n(r),o=/^[\s\u3000\uFEFF]+|[\s\u3000\uFEFF]+$/g;function s(t){if("string"==typeof t)return t.replace(o,"");if("object"!=n()(t))return t;for(var e in t)t.hasOwnProperty(e)&&(t[e]=s(t[e]));return t}function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";return(new Array(e).join(a)+t).slice(-Math.max(e,(""+t).length))}},163:function(t,e,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{staticClass:"ui-upload-model ui-form",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.hide},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("Upload",{ref:"upload",attrs:{multiple:e.options.multiple,type:"drag",format:e.options.format,"max-size":e.options.maxSize,"before-upload":e.handleBeforeUpload,"on-exceeded-size":e.handleMaxSize,"on-format-error":e.handleFormatError,"on-error":e.handleError,"on-progress":e.handleProgress,"on-success":e.handleSuccess,action:e.url,name:e.options.name}},[a("div",{staticStyle:{padding:"60px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),a("p",[e._v("点击或将文件拖拽到这里进行上传")]),e._v(" "),a("p",{staticStyle:{color:"#999"}},[e._v("("+e._s(e.options.tip)+")")])],1)]),e._v(" "),e.chooseFile?a("p",[e._v("已选择文件："),a("span",{staticClass:"choosed"},[e._v(e._s(e.chooseFile))])]):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.hide}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.loadingStatus},on:{click:e.uploadFile}},[e._v("上传")])],1)],1)],1)};r._withStripped=!0;var n=a(8),o=a.n(n),s=(a(28),a(39)),i={multiple:!1,maxSize:10240,format:[],name:"file",urlPath:"",tip:"请上传文件,大小不超过10M"},l={props:{option:{type:Object,default:function(){return{}}},url:{type:String,default:""}},data:function(){return{loadingStatus:!1,title:"文件上传",visible:!1,options:{},readyFiles:[]}},computed:{chooseFile:function(){return this.readyFiles.map(function(t){return t.name}).join(",")}},methods:{show:function(){this.visible=!0,this.options=o()({},i,this.option)},hide:function(){this.visible=!1,this.reset()},handleBeforeUpload:function(t){return this.readyFiles.push(t),!1},handleFormatError:function(t,e){var a="文件 ".concat(t.name," 的格式错误");this.$Message.error(a),this.reset()},handleMaxSize:function(t,e){var a=Object(s.a)(1024*this.options.maxSize," "),r="文件 ".concat(t.name," 大小超过").concat(a);this.$Message.error(r),this.reset()},handleError:function(t,e,a){this._showErrMsg(t),this.loadingStatus=!1},handleProgress:function(t,e,a){},handleSuccess:function(t,e,a){0==t.success?this.$Message.error(t.message):(this.$emit("done",t.result),this.hide(),this.$Message.success("上传成功"))},uploadFile:function(){this.readyFiles;if(this.readyFiles.length){this.loadingStatus=!0;for(var t=0;t<this.readyFiles.length;t++){var e=this.readyFiles[t];this.$refs.upload.post(e)}}else this.$Message.warning("请选择文件")},reset:function(){this.loadingStatus=!1,this.readyFiles=[],this.$refs.upload.clearFiles()}}},c=(a(382),a(1)),u=Object(c.a)(l,r,[],!1,null,null,null);u.options.__file="src/components/manage/common/upload-model.vue";e.a=u.exports},164:function(t,e,a){"use strict";var r=function(){var t=this.$createElement;this._self._c;return this._m(0)};r._withStripped=!0;a(336);var n=a(1),o=Object(n.a)({},r,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui-manage-footer"},[a("p",{staticClass:"footer-auth"},[t._v("\n\t\t© 2015-2019 \n\t\t"),a("a",{attrs:{href:"http://www.superb-pay.com"}},[t._v("福建超汇信息技术有限公司")]),t._v("\n\t\t版权所有\n\t")])])}],!1,null,null,null);o.options.__file="src/components/manage/common/footer.vue";e.a=o.exports},2:function(t,e,a){t.exports=a(40)(3)},28:function(t,e,a){"use strict";function r(t){return"[object Array]"===Object.prototype.toString.apply(t)}var n=a(19),o=a.n(n);function s(t){if(!t)return!1;if("object"==o()(t)||r(t))return!0;if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=o()(e)||!e)}catch(t){return!1}return!1}a(61);a(14),a(39);var i=a(56),l=a(3),c=a.n(l);c.a.locale("zh-cn"),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return i})},29:function(t,e,a){t.exports=a(40)(2)},336:function(t,e,a){"use strict";var r=a(75);a.n(r).a},337:function(t,e,a){"use strict";var r=a(76);a.n(r).a},341:function(t,e,a){t.exports=a(40)(6)},35:function(t,e,a){var r="https://www.easy-mock.com/mock/5c983285748d442f4b43f26b/resource/".replace(/([^:])\/{2,}/g,"$1/"),n={400:"{status}:请求数据格式错误！",401:"{status}:请刷新页面重新操作或退出重登录！",403:"{status}:请刷新页面重新操作或退出重登录！",404:"{status}:请求路径不存在！",405:"{status}:请求方法服务端不允许！",408:"{status}:请求超时，请稍后重试！",415:"{status}:服务器无法处理请求附带的媒体格式！",500:"{status}:系统异常，请刷新页面重新操作或退出重登录！",other:"{status}:网络问题，请稍后重试！"};t.exports={baseURL:r,timeout:6e4,contentType:{xml:"text/xml",json:"application/json;charset=UTF-8",form:"application/x-www-form-urlencoded;charset=UTF-8"},method:["OPTIONS","HEAD","GET","POST","PUT","DELETE","TRACE","CONNECT"],statusCode:n,getStatusTxt:function(a){var t=n[a.status]||n.other;return t=t.replace(/\{(\w+)\}/g,function(t,e){return a[e]||""})}}},360:function(t,e,a){var r={"./zh-cn":159,"./zh-cn.js":159};function n(t){var e=o(t);return a(e)}function o(t){if(a.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(r)},n.resolve=o,(t.exports=n).id=360},369:function(t,e){},374:function(t,e,a){"use strict";var r=a(78);a.n(r).a},375:function(t,e,a){"use strict";var r=a(79);a.n(r).a},376:function(t,e,a){"use strict";var r=a(80);a.n(r).a},377:function(t,e,a){"use strict";var r=a(81);a.n(r).a},378:function(t,e,a){"use strict";var r=a(82);a.n(r).a},379:function(t,e,a){"use strict";var r=a(83);a.n(r).a},38:function(t,e,a){"use strict";var r=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"ui-bread-crumb"},[r("Breadcrumb",a._l(a.data,function(t,e){return r("BreadcrumbItem",{key:e},[a._v(a._s(t))])}),1)],1)};r._withStripped=!0;var n={props:{data:{type:Array,default:function(){return[]}}}},o=(a(374),a(1)),s=Object(o.a)(n,r,[],!1,null,null,null);s.options.__file="src/components/manage/common/bread-crumb.vue";e.a=s.exports},380:function(t,e,a){"use strict";var r=a(84);a.n(r).a},381:function(t,e,a){"use strict";var r=a(85);a.n(r).a},382:function(t,e,a){"use strict";var r=a(86);a.n(r).a},383:function(t,e,a){"use strict";var r=a(87);a.n(r).a},384:function(t,e,a){},385:function(t,e,a){"use strict";a.r(e);a(171);var r=a(2),n=a(88),o="/gateway/api.action",u={common:{userInfo:"GET:/v1.0/common/userinfo",schoolLogo:"GET:/v1.0/schoolLogo/{id}",phone_info:"GET:/v1.0/common/phone_info",info:"GET:/v1.0/common/info",login:"POST:/v1.0/login",captcha:"GET:/v1.0/captcha",new:"POST:".concat(o,"?apiType=manage&method=plant/test/mulute.action"),newOne:"POST:".concat(o,"/{id}?method=plant/new/test.action&id={id}"),test:"POST:/v1/1234567/merchantApply/findPayment?RequestType=form"},uploadCerFil:"POST:v1/123456/merchantInfo/uploadCerFile",commons:{login:"POST:/login",logout:"POST:/logout",getPermission:"GET:/userInfo/logInfo",modifyPwd:"POST:/userInfo/updatePwd",loseSession:"GET:/loseSession"},materials:{queryFirst:"POST:v1/123456/merchantInfo/findPage",saveFirst:"POST:v1/123456/merchantInfo/save",delFirst:"POST:v1/123456/merchantInfo/delete"},system:{user:{query:"GET:/userInfo/list",add:"POST:/userInfo/save",edit:"POST:/userInfo/update",del:"POST:/userInfo/remove",resetPwd:"POST:/userInfo/resetPwd"},organization:{treeList:"GET:/organizationInfo/treeDatas",query:"GET:/organizationInfo/list",add:"POST:/organizationInfo/save",edit:"POST:/organizationInfo/update",del:"POST:/organizationInfo/remove",editName:"POST:/organizationInfo/updateRootName"},role:{getAllRole:"GET:/sysRole/listSysresTreeDataAll",setRolePermis:"POST:/sysRole/setRolePermis",query:"GET:/sysRole/list",add:"POST:/sysRole/save",edit:"POST:/sysRole/update",del:"POST:/sysRole/remove"}},merchant:{first:{query:"GET:/merchantInfo/list",add:"POST:/merchantInfo/save",edit:"POST:/merchantInfo/update",del:"POST:/merchantInfo/remove",updateStatus:"POST:/merchantInfo/updateStatus",uploadCerFil:"POST:/merchantInfo/uploadCerFile"}}},s={sex:[{label:"男",value:1},{label:"女",value:2}]},i={illegal:["exe","cmd","sh","bat","com","dll"],video:["mp4","m4v","flv","f4v","wmv","avi","mov","mpg","mpeg","3gp","rmvb"],audio:["mp3","aac","wav","wma","cda","flac","m4a","mid","mka"],document:["doc","docx","ppt","pptx","pdf"],image:["jpg","jpeg","gif","png"],excel:["xls","xlsx"],word:["doc","docx"],ppt:["ppt","pptx"],pdf:["pdf"],type:{other:0,video:1,audio:2,document:3,image:4},status:{trans:1,normal:2,transFail:-1,uploadFail:-2},chunkSize:"1MB",maxSize:"4GB",thumbMaxSize:"500KB",docMaxSize:"100MB",typeLabel:[{value:1,label:"视频"},{value:2,label:"音频"},{value:3,label:"文档"},{value:4,label:"图片"},{value:0,label:"其他"}],thumbSize:{width:500,height:281}},l={API:u,VAR:s,REG:{phone:/^1[345789]\d{9}$/,letterOrNumber:/^[0-9a-zA-Z]*$/},install:function(t){l.installed||(l.installed=!0,t.prototype.$cfg=l)}},c=l,d=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"manage"}},[e("div",{staticClass:"ui-content-container"},[e("router-view")],1)])};d._withStripped=!0;var m=a(1),h=Object(m.a)({},d,[],!1,null,null,null);h.options.__file="src/components/manage/index.vue";var f=h.exports,p=a(117),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-login"},[a("div",{staticClass:"ui-login-logo"},[e._v("智能商户管理平台\n\t\t"),e._m(0),e._v(" "),a("div",{staticClass:"right-login"},[a("div",{staticClass:"login-title"},[e._v("系统登陆")]),e._v(" "),a("Form",{ref:"form",attrs:{model:e.formData,rules:e.rules}},[a("FormItem",{attrs:{prop:"userName"}},[a("Input",{attrs:{type:"text",size:"large",placeholder:"用户名"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}},[a("Icon",{staticClass:"icon-user",attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",size:"large",placeholder:"密码"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}},[a("Icon",{staticClass:"icon-password",attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",long:""},on:{click:e.login}},[e._v("登陆")])],1)],1)],1)]),e._v(" "),a("Footer")],1)};v._withStripped=!0;var g={components:{Footer:a(164).a},data:function(){return{formData:{userName:"",password:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不得小于六位",trigger:"blur"}]}}},methods:{login:function(){var e=this,a=this;this.$refs.form.validate(function(t){t&&e.$api(e.$cfg.API.commons.login,{userName:a.formData.userName,password:a.formData.password},{showLoading:!0}).then(function(t){var e=t.result.jsessionid||"";a.jump(e)}).catch(function(t){a._showErrMsg(t,"登陆失败")})})},jump:function(t){this.$store.commit("info/setUserToken",t);var e=this.$route.query.path||"/";this.$router.push({path:e})}},mounted:function(){},created:function(){var e=this;document.onkeydown=function(t){13==window.event.keyCode&&e.login()}}},b=(a(337),Object(m.a)(g,v,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left-info"},[a("div",[a("h1",[t._v("硬软件为一体的云计算系统")]),t._v(" "),a("p",[t._v("多样化支付方案")]),t._v(" "),a("p",[t._v("在线自助点餐外卖")]),t._v(" "),a("p",[t._v("会员数据化管理与游戏化营销")]),t._v(" "),a("p",[t._v("基于移动互联网技术一体化精准运营解决方案")])])])}],!1,null,null,null));b.options.__file="src/components/manage/login/index.vue";var _=b.exports;r.default.use(p.a);var y=new p.a({scrollBehavior:function(){return{y:0}},routes:[{path:"/login",name:"login",component:_}],linkActiveClass:"active"}),w=a(118),I=a(19),D=a.n(I),S=a(35),N=a.n(S),$=a(8),k=a.n($),C=a(165),x=a.n(C),F=a(166),O=a.n(F),E=a(56),T=a(28),P=a(14),z=a(29),B=a.n(z),M=a(77),A=a.n(M),j=0;function R(){0===j&&z.Spin.show({render:function(t){return t("div",{class:"diy-load-content"},[t("Icon",{class:"diy-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","数据加载中，请稍候...")])}}),j++}function L(){j<=0||0===--j&&A()(q,300)()}var q=function(){0===j&&z.Spin.hide()},G={timeout:N.a.timeout,baseURL:N.a.baseURL,contentType:"form",trim:!0,retry:!0,maxRetry:2,headers:{"X-Requested-With":"XMLHttpRequest"}};var U=function(t){var s=x.a.create(k()(!0,{},G,t));return s.interceptors.request.use(function(t){if(!t)throw new Error("请求配置丢失，请检查request拦截器是否没有return返回配置");t.contentType&&N.a.contentType[t.contentType]&&(t.headers["Content-Type"]=N.a.contentType[t.contentType]);var e=Object(E.getvar)(t.url,"RequestType");e&&(t.headers["Content-Type"]=N.a.contentType[e]);var a=t.data,r=oa.state.info.UserToken||"";return r&&(a=k()({},a,{jsessionid:r})),a&&t.trim&&(a="object"==D()(a)?"get"==t.method?Object(P.b)(a):"json"==t.contentType?JSON.stringify(a,function(t,e){return Object(P.b)(e)}):O.a.stringify(Object(P.b)(a)):Object(T.b)(a)?JSON.stringify(Object(P.b)(JSON.parse(a))):Object(P.b)(a),t.data=a),"get"==t.method.toLowerCase()&&(t.url=Object(E.join)(t.url,a)),t.showLoading&&R(),t}),s.interceptors.response.use(function(t){var e=t.data,a=t.config;t.config.showLoading&&L(),e&&Object(T.b)(e)||(e={success:!1,code:0,message:"",result:""});var r,n=!1;if((!a.retryTime||a.retryTime<a.maxRetry)&&("boolean"==typeof a.retry&&a.retry?n=30==e.code:"function"==typeof a.retry&&(n=!0===a.retry(e))),n)return a.source?(r=a.source).source=k()({},r):(r=a).url=r.url.replace(r.baseURL,""),r.retryTime=a.retryTime?a.retryTime+1:1,s(r);if(!0===e.success)return e;e.message||(e.message="发生了个奇怪的错误");var o=new Error(e.message);throw o.data=e,o.response=t,o},function(t){var e={success:!1,code:-1,message:""};return t&&t.response?(e.code=-t.response.status,e.message=N.a.getStatusTxt(t.response)):(console.error(t),e.message="请求失败：网络错误或超时"),t.data=e,t.config.showLoading&&L(),Promise.reject(t)}),s},H=/\{(.*?)\}/g;function J(t){if(t.apis&&this.injectAPI(t.apis),t.methods){var e="boolean"==typeof t.methods?N.a.method:t.methods;this.injectMethod(e)}this.instance=U(t.axios)}J.prototype={request:function(t,a,e){if(!this.instance)throw new Error("未初始化，请先执行install方法");if(t){var r=t.indexOf(":"),n="get",o={};return r!=t.indexOf("://")&&-1<r&&r<=7&&(n=t.substr(0,r).toLowerCase(),t=t.substring(r+1)),H.test(t)&&(t=t.replace(H,function(t,e){return a&&void 0!==a[e]?a[e]:""})),o.url=t,o.method=n,o.data=a,(o=k()(o,e)).source=k()({},o),this.instance(o)}},injectAPI:function(t){var r=this;for(var e in t)if(t.hasOwnProperty(e))if("object"==D()(e))for(var a in e)this[e+"."+a]=function(a){return function(t,e){return r.request(a,t,e)}}(t[e][a]);else this[e]=function(a){return function(t,e){return r.request(a,t,e)}}(t[e]);return this},injectMethod:function(t){for(var e=t.length,a=0;a<e;a++)this[t[a].toLowerCase()]=function(r){return function(t,e,a){return a=k()({},a,{method:r}),this.request(t,e,a)}}(t[a]);return this},intercept:function(){if(!this.instance)throw new Error("未初始化，请先执行install方法");var t=arguments[0].toLowerCase(),e=Array.prototype.slice.call(arguments,1),a=this.instance.interceptors[t];return a.use.apply(a,e),this}};var W=J,Q=a(115),Z=a(18),K={namespace:"$api",methods:!0};function X(t){var e=new W(t),a=Q(W.prototype.request,e);return Z.extend(a,W.prototype,e),Z.extend(a,e),a}var Y=X(K);Y.install=function(t,e){if(e=k()(K,e),!t||!t[e.namespace]){var a=X(e);return t&&("function"==typeof t?t.prototype[e.namespace]=a:t[e.namespace]=a),a}};var V=Y,tt=(a(369),window),et=tt.location,at=tt.navigator,rt=at.userAgent.toLowerCase();function nt(t){return t.test(rt)}var ot="ontouchend"in tt,st=nt(/android|htc/)||/linux/i.test(at.platform+""),it=st&&nt(/mobile/),lt=st&&!it,ct=!st&&nt(/ipad/),ut=!st&&nt(/ipod|iphone/),dt=ct||ut,mt=nt(/windows/),ht=nt(/windows phone/),ft=mt&&nt(/touch/)&&!ht,pt=nt(/meego/),vt=!!at.standalone,gt=nt(/ucbrowser/),bt=nt(/micromessenger/),_t=nt(/qq/),yt=!!tt.chrome,wt=st&&nt(/htc\s+/),It=it||ut||ht||pt,Dt=nt(/tablet/)||lt||ct||ft;(""+et.port).indexOf("0");r.default.use(V);var St=r.default.prototype.$api;St.intercept("request",function(t){return t.data=k()({_t:+new Date},window._params,t.data),t}),St.intercept("response",function(t){return null==t.result&&(t.result={}),t},function(t){return 168==(t.data||{}).code&&(z.Message.error("session失效，重新登陆"),setTimeout(function(){oa.commit("info/setUserToken",""),oa.commit("rbac/setPermission",[]);var t=y.history.current.path||"";y.push({name:"login",query:{path:t}}),location.reload()},1500)),Promise.reject(t)});var Nt=St,$t=!1,kt={namespaced:!0,state:{UserToken:localStorage.getItem("token"),common:{},school:{session:"odsfe324ds-dersd"}},mutations:{setCommonInfo:function(t,e){t.common=e},setSchoolInfo:function(t,e){t.school=e},setUserToken:function(t,e){var a=e||"";localStorage.setItem("token",a),t.UserToken=a}},actions:{fetchCommonInfo:function(t){var e=t.commit,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=a.type,n=a.force;if(!$t||n){var o=r?u.common.phone_info:u.common.info;Nt(o).then(function(t){$t=!0,e("setCommonInfo",t.result)}).catch(function(){})}},fetchSchoolInfo:function(t){var e=t.commit;Nt(u.common.schoolLogo).then(function(t){e("setSchoolInfo",t.result)}).catch(function(){})}}},Ct=a(119),xt=a.n(Ct),Ft=a(62),Ot=a.n(Ft),Et=a(167),Tt=a.n(Et);function Pt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.forEach(function(a,t){e.forEach(function(t,e){t.authName===a.meta.authName&&(a.meta.name=t.name,a.meta.icon=t.icon,t.children&&0<t.children.length&&(a.children=Pt(t.children,a.children)),r.push(a))})}),r}var zt=[];function Bt(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){t.children&&t.children.length&&Bt(t.children),!1===t.isMenu&&zt.push(t)}),zt}var Mt=function(){return a.e(6).then(a.bind(null,411))},At=[{path:"/",name:"Home",component:function(){return Promise.all([a.e(0),a.e(4)]).then(a.bind(null,410))},redirect:"home",children:[{path:"home",name:"homepage",meta:{authName:"home-page",groupName:"homepage",icon:"md-home",name:"首页"},component:function(){return a.e(5).then(a.bind(null,412))}}]},{path:"/404",name:"notfound",component:Mt},{path:"*",component:Mt,redirect:"/404"}],jt=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"c-m-system-user ui-box"},[r("bread-crumb",{attrs:{data:a.crumbData}}),a._v(" "),r("search",{staticClass:"ui-search",attrs:{data:a.filter},on:{search:a.fetchData}}),a._v(" "),r("div",{staticClass:"ui-hander"},[a._auth("system-setting-user-add")?r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:a.showAdd}},[a._v("新增")]):a._e()],1),a._v(" "),r("div",{staticClass:"ui-table-content"},[r("Table",{attrs:{border:"",columns:a.columns,data:a.listData},on:{"on-selection-change":a.selectRow},scopedSlots:a._u([{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showDetail(e.id,e,!0)}}},[a._v("详情")]),a._v(" "),r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showEdit(e.id,e)}}},[a._v("编辑")]),a._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.deleteData(e.id)}}},[a._v("删除")]),a._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.resetPwd(e.id,e)}}},[a._v("密码重置")])]}}])})],1),a._v(" "),r("div",{staticClass:"ui-page"},[r("Page",{attrs:{placement:"top",total:a.totalCount,current:a.filter.pageNum,"page-size":a.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":a.pageChange,"update:current":function(t){return a.$set(a.filter,"pageNum",t)}}})],1),a._v(" "),r("dialog-form",{ref:"form",on:{edit:a.fetchData,add:a.add}})],1)};jt._withStripped=!0;var Rt=a(38),Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-user-search search-bar"},[a("Form",{attrs:{model:e.data,inline:"","label-width":90}},[a("FormItem",{attrs:{prop:"userName",label:"用户名"}},[a("Input",{attrs:{placeholder:"用户名"},model:{value:e.data.userName,callback:function(t){e.$set(e.data,"userName",t)},expression:"data.userName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"name",label:"姓名"}},[a("Input",{attrs:{placeholder:"姓名"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"phone",label:"手机号"}},[a("Input",{attrs:{placeholder:"手机号"},model:{value:e.data.phone,callback:function(t){e.$set(e.data,"phone",t)},expression:"data.phone"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"organizationInfoIdRef",label:"机构"}},[a("Input",{attrs:{placeholder:"机构"},model:{value:e.data.organizationInfoIdRef,callback:function(t){e.$set(e.data,"organizationInfoIdRef",t)},expression:"data.organizationInfoIdRef"}})],1),e._v(" "),a("br"),e._v(" "),a("FormItem",[a("Button",{attrs:{icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{icon:"md-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)};Lt._withStripped=!0;var qt={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{search:function(){this.$emit("search")},reset:function(){var t=this;t.data.userName="",t.data.name="",t.data.phone="",t.data.organizationInfoIdRef="",t.search()}}},Gt=Object(m.a)(qt,Lt,[],!1,null,null,null);Gt.options.__file="src/components/manage/system/user/search.vue";var Ut=Gt.exports,Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-system-user-dialog"},[a("Modal",{staticClass:"ui-form system-user-form ",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.close},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Form",{ref:"form",staticClass:"ui-tabel-body c",attrs:{rules:e.rules,model:e.formData,"label-width":90}},[a("FormItem",{attrs:{label:"用户名",prop:"userName"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"用户名"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"姓名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"手机号",prop:"phone"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"手机号"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),e._v(" "),a("FormItem",{attrs:{label:"角色选择",prop:"roleIds"}},[a("Select",{attrs:{disabled:e.unEdit,multiple:""},model:{value:e.formData.roleIds,callback:function(t){e.$set(e.formData,"roleIds",t)},expression:"formData.roleIds"}},e._l(e.roleOption,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),a("FormItem",{staticClass:"choose-organ",attrs:{label:"所属机构",prop:"organizationInfoIdRefName"}},[a("Input",{attrs:{disabled:e.unEdit,readonly:!0,placeholder:"所属机构"},model:{value:e.formData.organizationInfoIdRefName,callback:function(t){e.$set(e.formData,"organizationInfoIdRefName",t)},expression:"formData.organizationInfoIdRefName"}}),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.unEdit},on:{click:e.showChooseOrgan}},[e._v("机构选择")])],1),e._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{rows:4,disabled:e.unEdit,type:"textarea",placeholder:"备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.loading||e.saving||e.unEdit,loading:e.saving},on:{click:e.save}},[e._v("保存")])],1)],1),e._v(" "),a("choose-organ",{ref:"organChoose",on:{choose:e.choose}})],1)},Jt={data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{info:"",add:"",edit:""}},id:0,inited:!1,formData:{},rules:{},dialogShow:!1,loading:!1,hasEdited:!1,saving:!1,labelWidth:"7em",unEdit:!1}},computed:{title:function(){return this.id?"编辑":"添加"}},watch:{formData:{handler:function(){this.inited&&(this.hasEdited=!0)},deep:Ht._withStripped=!0}},methods:{show:function(t,e,a){this.id=t||0,this.unEdit=a||!1,this.dialogShow=!0,e?this.setFormData(e):this.id?this.fetchData():this.setFormData(this._defaultFormData)},close:function(){var t=this;this.hasEdited?t.$Modal.confirm({title:"警告",content:"<p>表单未保存，确定要关闭吗？</p>",onOk:function(){t.closeHandle()}}):t.closeHandle()},closeHandle:function(){this.dialogShow=!1,this.resetTimer=setTimeout(this.reset,300)},fetchData:function(){var e=this;if(this.FORM_CONFIG.api.info&&!this.loading){var t={};t[this.FORM_CONFIG.field.id]=this.id,this.loading=!0,this.$api(this.FORM_CONFIG.api.info,t).then(function(t){e.setFormData(t.result),e.loading=!1}).catch(function(t){e.loading=!1,e._showErrMsg(t)})}},setFormData:function(t){var e=this;this.formData=k()(!0,{},t),this.$refs.form.resetFields(),this.onSetFormData&&this.onSetFormData(),this.$nextTick(function(){e.inited=!0})},save:function(){var e=this;this.saving||this.$refs.form.validate(function(t){t&&e.post()})},post:function(){var e=this,a=this.id?"edit":"add",t=this.FORM_CONFIG.api[a];if(t&&(!this.beforeSave||!1!==this.beforeSave())){this.saving=!0;var r=this.parsePostData?this.parsePostData():this.formData;this.$api(t,r).then(function(t){e.$emit(a,t.result),e.saving=!1,e.hasEdited=!1,e.$Message.success("保存成功"),e.close(),e.onSuccess&&e.onSuccess(t)}).catch(function(t){e._showErrMsg(t),e.saving=!1,e.onFail&&e.onFail(t)})}},reset:function(){clearTimeout(this.resetTimer),this.inited=!1,this.hasEdited=!1;var t=this.$refs.form;t&&t.resetFields()}},created:function(){this._defaultFormData=k()(!0,{},this.formData)}},Wt=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("Modal",{staticClass:"ui-form c-m-user-choose-organ",attrs:{"mask-closable":!1,title:a.title,width:"1200"},on:{"on-cancel":a.close},model:{value:a.dialogShow,callback:function(t){a.dialogShow=t},expression:"dialogShow"}},[r("div",{staticClass:"ui-choose-organ-left c"},[r("div",{staticClass:"tree-title"},[a._v("机构信息")]),a._v(" "),r("div",{staticClass:"choose-organ-tree"},[r("Tree",{ref:"tree",attrs:{data:a.treeData},on:{"on-select-change":a.selectChange}})],1)]),a._v(" "),r("div",{staticClass:"c-m-choose-organ-search ui-search search-bar"},[r("Form",{attrs:{model:a.filter,inline:"","label-width":120}},[r("FormItem",{attrs:{prop:"name",label:"机构名"}},[r("Input",{attrs:{placeholder:"机构名"},model:{value:a.filter.name,callback:function(t){a.$set(a.filter,"name",t)},expression:"filter.name"}})],1),a._v(" "),r("FormItem",{attrs:{"label-width":0}},[r("Button",{attrs:{icon:"ios-search"},on:{click:a.fetchData}},[a._v("搜索")]),a._v(" "),r("Button",{attrs:{icon:"md-refresh"},on:{click:a.reset}},[a._v("重置")])],1)],1)],1),a._v(" "),r("div",{staticClass:"ui-choose-organ-right c"},[r("div",{staticClass:"ui-table-content"},[r("Table",{attrs:{border:"",columns:a.columns,data:a.listData},scopedSlots:a._u([{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.chooseOrgan(e)}}},[a._v("选择")])]}}])})],1),a._v(" "),r("div",{staticClass:"ui-page"},[r("Page",{attrs:{placement:"top",total:a.totalCount,current:a.filter.pageNum,"page-size":a.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":a.pageChange,"update:current":function(t){return a.$set(a.filter,"pageNum",t)}}})],1)]),a._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:a.close}},[a._v("关闭")])],1)])};Wt._withStripped=!0;var Qt={data:function(){return{TABLE_CONFIG:{field:{id:"id"},api:{query:"",delete:""}},filter:{pageNum:1,pageSize:15,sort:""},autoLoad:!0,loading:!0,listData:[],totalCount:0,pickedId:[],usePage:!0,useRouterQuery:!1}},beforeRouteUpdate:function(t,e,a){if(this.useRouterQuery){var r=t.query.page||1;this.filter.pageNum=parseInt(r),this.fetchData(),a()}else a()},methods:{fetchData:function(t,e){var a=this;this.TABLE_CONFIG.api.query&&(!t&&this.loading||(this.beforeFetch&&this.beforeFetch(),e=k()({},this.filter,e),this.loading=!0,this.$api(this.TABLE_CONFIG.api.query,e,{showLoading:!0}).then(function(t){a.loading=!1,a.filter=e,a.parseData(t.result),a.afterFetch&&a.afterFetch()}).catch(function(t){a.loading=!1,a._showErrMsg(t)})))},parseData:function(t){this.usePage?(this.listData=t.records,this.totalCount=t.total):(this.listData=t,this.totalCount=t.length)},deleteData:function(t,e){if(this.TABLE_CONFIG.api.delete){var a=[],r="确定删除该条数据么?";if(t?a.push(t):(a=this.pickedId,r="确定删除选中的数据么?"),!a.length)return this.$Message.warning("未选择任何数据"),!1;var n=k()({},e);n[this.TABLE_CONFIG.field.id]=a.join(","),this._asyncDialog(r,n)}},_asyncDialog:function(t,e){var a=this;a.$Modal.confirm({title:"警告",content:"<p>".concat(t,"</p>"),loading:!0,onOk:function(){a.$api(a.TABLE_CONFIG.api.delete,e).then(function(t){a.$Modal.remove(),a.$Message.success("删除成功"),a.usePage?a.fetchData():a.__delListData(ids)}).catch(function(t){setTimeout(function(){a.$Modal.remove()},500),a._showErrMsg(t)})}})},__delListData:function(a){var r=this;this.listData.forEach(function(t,e){~a.indexOf(t[r.TABLE_CONFIG.field.id])&&r.listData.splice(e,1)})},selectRow:function(t){var e=this,a=[];t.forEach(function(t){a.push(t[e.TABLE_CONFIG.field.id])}),this.pickedId=a},sortData:function(t){t.order?this.filter.sort="ascending"==t.order?2:1:this.filter.sort="",this.fetchData()},pageChange:function(t){if(this.beforePageChange&&this.beforePageChange(t),this.useRouterQuery){var e=this.$route;if((e.query.page||1)==this.filter.pageNum)return;var a={name:e.name,meta:k()({},e.meta),params:k()({},e.params),query:k()({},e.query)};a.query.page=t,e.name||(a.path=e.path),this.$router.push(a)}else this.fetchData();this.afterPageChange&&this.afterPageChange(t)},pushData:function(t){this.listData.unshift(t),this.listData.splice(this.filter.pageSize),this.totalCount++},updateData:function(r){var n=this,o=-1;this.listData.forEach(function(t,e){var a=t[n.TABLE_CONFIG.field.id];a&&a==r[n.TABLE_CONFIG.field.id]&&(o=e)}),-1!=o&&this.$set(this.listData,o,r)}},created:function(){this.fetchDataHandle=A()(this.fetchData,200);var t=this.$route.query.page;t&&(this.filter.pageNum=parseInt(t)),this.autoLoad&&this.fetchData(!0)}},Zt={mixins:[Qt],data:function(){return{title:"机构选择",dialogShow:!1,treeData:[],filter:{parentId:0,name:""},TABLE_CONFIG:{field:{id:"id"},api:{query:this.$cfg.API.system.organization.query}},autoLoad:!1,columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"机构名称",key:"name",align:"center"},{title:"操作",align:"center",width:200,slot:"handle"}]}},methods:{show:function(){this.fetchTreeData()},close:function(){var t=this;t.dialogShow=!1,setTimeout(function(){t.resetDialogData()},500)},fetchTreeData:function(){var a=this,r=this;r.$api(r.$cfg.API.system.organization.treeList,null,{showLoading:!0}).then(function(t){a.dialogShow=!0;var e=t.result.trees[0]||[];e.expand=!0,e.selected=!0,r.treeData=t.result.trees||[],r.filter.parentId=e.id,r.fetchData(!0,{pageNum:1})}).catch(function(){})},selectChange:function(t,e){this.filter.parentId=e.id,this.fetchData()},chooseOrgan:function(t){this.$emit("choose",t),this.close()},reset:function(){this.filter.name="",this.fetchData()},resetDialogData:function(){this.treeData=[],this.listData=[],this.filter.name=""}}},Kt=(a(375),Object(m.a)(Zt,Wt,[],!1,null,null,null));Kt.options.__file="src/components/manage/system/user/choose-organ.vue";var Xt={mixins:[Jt],components:{chooseOrgan:Kt.exports},data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{add:this.$cfg.API.system.user.add,edit:this.$cfg.API.system.user.edit}},formData:{userName:"",name:"",phone:"",roleIds:"",organizationInfoIdRef:"",organizationInfoIdRefName:"",remark:""},isShowPassword:!1,rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.checkPhone,trigger:"blur"}],roleIds:[{type:"array",required:!0,message:"请选择角色",trigger:"change"}],organizationInfoIdRefName:[{required:!0,message:"请选择机构",trigger:"blur"}]},roleOption:[]}},methods:{checkPhone:function(t,e,a){if(!this.$cfg.REG.phone.test(e))return a(new Error("请输入正确的手机号"));a()},showPwd:function(){this.isShowPassword=!this.isShowPassword},fetchRoleOption:function(){var e=this;this.$api(this.$cfg.API.system.role.query,{pageSize:100}).then(function(t){e.roleOption=t.result.records}).catch(function(){})},onSetFormData:function(){this.formData.roleIds=this.formData.roleIds?this.formData.roleIds.split(","):[]},parsePostData:function(){var t=k()(!0,{},this.formData);return t.roleIds=t.roleIds.join(","),t},showChooseOrgan:function(){this.$refs.organChoose.show()},choose:function(t){this.formData.organizationInfoIdRef=t.id,this.formData.organizationInfoIdRefName=t.name}},created:function(){this.fetchRoleOption()}},Yt=(a(376),Object(m.a)(Xt,Ht,[],!1,null,null,null));Yt.options.__file="src/components/manage/system/user/form.vue";var Vt=Yt.exports,te={mixins:[Qt],components:{BreadCrumb:Rt.a,Search:Ut,DialogForm:Vt},data:function(){return{crumbData:["系统设置","用户管理"],filter:{userName:"",name:"",phone:"",organizationInfoIdRef:""},TABLE_CONFIG:{field:{id:"id"},api:{query:this.$cfg.API.system.user.query,delete:this.$cfg.API.system.user.del}},columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"用户名",key:"userName",align:"center"},{title:"姓名",key:"name",align:"center"},{title:"手机",key:"phone",align:"center"},{title:"机构名",key:"organizationInfoIdRefName",align:"center"},{title:"创建时间",key:"createdTime",align:"center"},{title:"操作",align:"center",width:300,slot:"handle"}]}},methods:{showAdd:function(){this.$refs.form.show()},showEdit:function(t,e){this.$refs.form.show(t,e)},showDetail:function(t,e,a){this.$refs.form.show(t,e,a)},resetPwd:function(t,a){var r=this;r.$Modal.confirm({title:"警告",content:"<p>确定重置密码吗?</p>",loading:!0,onOk:function(){r.$api(r.$cfg.API.system.user.resetPwd,{id:t}).then(function(t){var e=a.phone?a.phone.substr(a.phone.length-6):"";r.$Modal.remove(),r.$Message.success("密码重置为手机号后六位 ".concat(e))}).catch(function(t){r._showErrMsg(t,"密码重置失败"),setTimeout(function(){r.$Modal.remove()},500)})}})},add:function(t){var e=t.pwd;this.pwdTip(e),this.fetchData()},pwdTip:function(t){this.$Modal.success({title:"提示",content:"<p>密码为手机号后六位 ".concat(t,"</p>")})}}},ee=Object(m.a)(te,jt,[],!1,null,null,null);ee.options.__file="src/components/manage/system/user/index.vue";var ae=ee.exports,re=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"c-m-system-role"},[r("bread-crumb",{attrs:{data:a.crumbData}}),a._v(" "),r("div",{staticClass:"ui-hander",staticStyle:{"padding-top":"65px"}},[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:a.showAdd}},[a._v("新增")])],1),a._v(" "),r("div",{staticClass:"ui-table-content"},[r("Table",{attrs:{border:"",columns:a.columns,data:a.listData},scopedSlots:a._u([{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showDetail(e.id,e,!0)}}},[a._v("详情")]),a._v(" "),r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showEdit(e.id,e)}}},[a._v("编辑")]),a._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.deleteData(e.id)}}},[a._v("删除")]),a._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.showAuth(e.id)}}},[a._v("权限设置")])]}}])})],1),a._v(" "),r("div",{staticClass:"ui-page"},[r("Page",{attrs:{placement:"top",current:a.filter.pageNum,total:a.totalCount,"page-size":a.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":a.pageChange,"update:current":function(t){return a.$set(a.filter,"pageNum",t)}}})],1),a._v(" "),r("dialog-form",{ref:"dialogform",on:{edit:a.fetchData,add:a.fetchData}}),a._v(" "),r("auth-form",{ref:"authform"})],1)},ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-system-role-dialog"},[a("Modal",{staticClass:"ui-form",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.close},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Form",{ref:"form",staticClass:"ui-tabel-body c",attrs:{rules:e.rules,model:e.formData,"label-width":90}},[a("FormItem",{attrs:{label:"角色名称",prop:"name"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"角色名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{disabled:e.unEdit,type:"textarea",placeholder:"备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.loading||e.saving||e.unEdit,loading:e.saving},on:{click:e.save}},[e._v("保存")])],1)],1)],1)};ne._withStripped=re._withStripped=!0;var oe={mixins:[Jt],data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{add:this.$cfg.API.system.role.add,edit:this.$cfg.API.system.role.edit}},formData:{name:"",remark:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}}}},se=Object(m.a)(oe,ne,[],!1,null,null,null);se.options.__file="src/components/manage/system/role/form.vue";var ie=se.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-system-roleauth"},[a("Modal",{staticClass:"ui-form",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.close},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Tstree",{ref:"trees",attrs:{data:e.authTreeList}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)};le._withStripped=!0;var ce=a(168),ue={components:{Tstree:a.n(ce).a},data:function(){return{title:"权限设置",dialogShow:!1,loading:!1,roleId:"",authTreeList:[]}},methods:{show:function(t){this.roleId=t||null,this.fetchAuth()},close:function(){var t=this;t.dialogShow=!1,setTimeout(function(){t.authTreeList=[]},500)},fetchAuth:function(){var e=this;this.$api(this.$cfg.API.system.role.getAllRole,{roleId:this.roleId},{showLoading:!0}).then(function(t){t.result.treesData&&t.result.treesData.length&&e.getAuth(t.result.treesData,!0),e.dialogShow=!0,e.authTreeList=t.result.treesData}).catch(function(){})},getAuth:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length?arguments[1]:void 0,a=this;return t.forEach(function(t){t.title=t.name,t.checkbox=!0,e&&(t.expanded=!0),t.checked||(t.checked=!1),t.children&&t.children.length&&a.getAuth(t.children,!1)}),t},save:function(){var t,e=this,a=this,r=a.$refs.trees.getCheckedNodes("checked")||[],n=a.$refs.trees.getCheckedNodes("indeterminated")||[],o=(t=[]).concat.apply(t,Ot()(r).concat(Ot()(n))).map(function(t){return t.id});console.log(o),a.loading=!0,a.$api(a.$cfg.API.system.role.setRolePermis,{roleId:a.roleId,permisIds:o.join(",")}).then(function(t){a.loading=!1,e.$Message.success("权限设置成功"),a.close()}).catch(function(){a.loading=!1,a._showErrMsg(err,"权限设置失败")})}}},de=(a(377),Object(m.a)(ue,le,[],!1,null,null,null));de.options.__file="src/components/manage/system/role/auth-tree.vue";var me=de.exports,he={mixins:[Qt],components:{BreadCrumb:Rt.a,DialogForm:ie,AuthForm:me},data:function(){return{crumbData:["系统设置","角色管理"],TABLE_CONFIG:{field:{id:"id"},api:{query:this.$cfg.API.system.role.query,delete:this.$cfg.API.system.role.del}},columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"角色名称",key:"name",align:"center"},{title:"创建时间",key:"createdTime",align:"center"},{title:"创建人",key:"creator",align:"center"},{title:"操作",align:"center",width:250,slot:"handle"}]}},methods:{showAdd:function(){this.$refs.dialogform.show()},showEdit:function(t,e){this.$refs.dialogform.show(t,e)},showDetail:function(t,e,a){this.$refs.dialogform.show(t,e,a)},showAuth:function(t){this.$refs.authform.show(t)}}},fe=Object(m.a)(he,re,[],!1,null,null,null);fe.options.__file="src/components/manage/system/role/index.vue";var pe=fe.exports,ve=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"c-m-system-organization"},[r("bread-crumb",{attrs:{data:a.crumbData}}),a._v(" "),r("div",{staticClass:"ui-organ-box c"},[r("div",{staticClass:"organ-left-content c"},[r("div",{staticClass:"tree-title"},[a._v("机构信息")]),a._v(" "),r("edit-name-pop",{directives:[{name:"show",rawName:"v-show",value:a.showEidtBtn,expression:"showEidtBtn"}],ref:"editname",on:{setrootname:a.setRootName}}),a._v(" "),r("organ-tree",{ref:"organtree",on:{change:a.changeSelect,"set-selected-node":a.setNode}})],1),a._v(" "),r("div",{staticClass:"organ-right-content"},[r("search",{staticClass:"ui-search",attrs:{data:a.filter},on:{search:a.fetchData}}),a._v(" "),r("div",{staticClass:"ui-hander"},[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:a.showAdd}},[a._v("新增")])],1),a._v(" "),r("div",{staticClass:"ui-table-content"},[r("Table",{attrs:{border:"",columns:a.columns,data:a.listData},scopedSlots:a._u([{key:"type",fn:function(t){var e=t.row;t.column,t.index;return[r("span",[a._v(a._s(a._f("typeFormatter")(e.type)))])]}},{key:"status",fn:function(t){var e=t.row;t.column,t.index;return[r("i-switch",{attrs:{"false-value":0,"true-value":1,size:"large"},model:{value:e.status,callback:function(t){a.$set(e,"status",t)},expression:"row.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[a._v("有效")]),a._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[a._v("无效")])])]}},{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showDetail(e.id,e,!0)}}},[a._v("详情")]),a._v(" "),r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showEdit(e.id,e)}}},[a._v("编辑")]),a._v(" "),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return a.deleteData(e.id)}}},[a._v("删除")])]}}])})],1),a._v(" "),r("div",{staticClass:"ui-page"},[r("Page",{attrs:{placement:"top",current:a.filter.pageNum,total:a.totalCount,"page-size":a.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":a.pageChange,"update:current":function(t){return a.$set(a.filter,"pageNum",t)}}})],1)],1)]),a._v(" "),r("dialog-form",{ref:"dialogform",attrs:{partername:a.parterName,parterid:a.filter.parentId},on:{edit:a.fetchData,add:a.fetchData}})],1)},ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-organization-search search-bar"},[a("Form",{attrs:{model:e.data,inline:"","label-width":120}},[a("FormItem",{attrs:{prop:"name",label:"机构名"}},[a("Input",{attrs:{clearable:"",placeholder:"机构名"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"institutionNumber",label:"机构号"}},[a("Input",{attrs:{clearable:"",placeholder:"机构号"},model:{value:e.data.institutionNumber,callback:function(t){e.$set(e.data,"institutionNumber",t)},expression:"data.institutionNumber"}})],1),e._v(" "),a("FormItem",{attrs:{"label-width":0}},[a("Button",{attrs:{icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{icon:"md-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)};ge._withStripped=ve._withStripped=!0;var be={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{search:function(){this.$emit("search")},reset:function(){this.data.name="",this.data.institutionNumber="",this.search()}}},_e=Object(m.a)(be,ge,[],!1,null,null,null);_e.options.__file="src/components/manage/system/organization/search.vue";var ye=_e.exports,we=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ui-tree-picker"},[e("Tree",{ref:"tree",attrs:{data:this.treeData},on:{"on-select-change":this.selectChange}})],1)};we._withStripped=!0;var Ie={data:function(){return{treeData:[]}},methods:{fetchTreeData:function(){var a=this;a.$api(a.$cfg.API.system.organization.treeList,null,{showLoading:!0}).then(function(t){var e=t.result.trees[0]||[];e.expand=!0,e.selected=!0,a.$emit("set-selected-node",e),a.treeData=t.result.trees||[]}).catch(function(){})},selectChange:function(t,e){this.$emit("change",e),e.selected=!0,console.log(t,"-------"),console.log(e,"++++++++")},setNodeName:function(t){this.treeData[0].title=t}},created:function(){this.fetchTreeData()}},De=(a(378),Object(m.a)(Ie,we,[],!1,null,null,null));De.options.__file="src/components/manage/common/tree-picker.vue";var Se=De.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-system-organization-dialog"},[a("Modal",{staticClass:"ui-form",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.close},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Form",{ref:"form",staticClass:"ui-tabel-body c",attrs:{rules:e.rules,model:e.formData,"label-width":90}},[a("FormItem",{attrs:{label:"上级机构",prop:"pName"}},[e._v("\n\t\t\t\t"+e._s(e.formData.pName)+"\n\t\t\t")]),e._v(" "),a("FormItem",{attrs:{label:"机构名称",prop:"name"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"机构名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"机构号",prop:"institutionNumber"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"机构号"},model:{value:e.formData.institutionNumber,callback:function(t){e.$set(e.formData,"institutionNumber",e._n(t))},expression:"formData.institutionNumber"}})],1),e._v(" "),a("FormItem",{attrs:{label:"分行",prop:"branch"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"分行"},model:{value:e.formData.branch,callback:function(t){e.$set(e.formData,"branch",e._n(t))},expression:"formData.branch"}})],1),e._v(" "),a("FormItem",{attrs:{label:"城市",prop:"city"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"城市"},model:{value:e.formData.city,callback:function(t){e.$set(e.formData,"city",t)},expression:"formData.city"}})],1),e._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{disabled:e.unEdit,type:"textarea",placeholder:"备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.loading||e.saving||e.unEdit,loading:e.saving},on:{click:e.save}},[e._v("保存")])],1)],1)],1)};Ne._withStripped=!0;var $e={mixins:[Jt],data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{add:this.$cfg.API.system.organization.add,edit:this.$cfg.API.system.organization.edit}},formData:{parentId:"",name:"",institutionNumber:"",type:"",branch:"",city:"",remark:""},rules:{pName:[{required:!0,message:"请输入上级机构",trigger:"blur"}],name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],institutionNumber:[{type:"number",required:!0,message:"请输入机构号",trigger:"blur"}],branch:[{type:"number",required:!0,message:"请输入分行",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}]}}}},ke=Object(m.a)($e,Ne,[],!1,null,null,null);ke.options.__file="src/components/manage/system/organization/form.vue";var Ce=ke.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-edit-rootname-pop"},[a("Poptip",{model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("Form",{ref:"form",staticClass:"ui-tabel-body c",attrs:{rules:e.rules,model:e.formData}},[a("FormItem",{attrs:{prop:"rootName","label-width":0}},[a("Input",{attrs:{placeholder:"修改根节点名称"},model:{value:e.formData.rootName,callback:function(t){e.$set(e.formData,"rootName",t)},expression:"formData.rootName"}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("Button",{attrs:{type:"text",size:"small"},on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"small"},on:{click:e.setRootName}},[e._v("保存")])],1)],1),e._v(" "),a("Button",{attrs:{type:"primary",size:"small"}},[e._v("修改名称")])],1)],1)};xe._withStripped=!0;var Fe={data:function(){return{visible:!1,formData:{rootName:""},rules:{rootName:[{required:!0,message:"名称不能为空",trigger:"blur"}]}}},methods:{close:function(){this.visible=!1,this.resetForm()},resetForm:function(){this.$refs.form.resetFields()},setRootName:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$emit("setrootname",e.formData.rootName)})}}},Oe=(a(379),Object(m.a)(Fe,xe,[],!1,null,null,null));Oe.options.__file="src/components/manage/system/organization/eidt-pop.vue";var Ee=Oe.exports,Te={mixins:[Qt],components:{BreadCrumb:Rt.a,Search:ye,OrganTree:Se,DialogForm:Ce,editNamePop:Ee},data:function(){return{crumbData:["系统设置","机构管理"],filter:{parentId:0,institutionNumber:"",name:"",pageNum:1,pageSize:15},autoLoad:!1,parterName:"",showEidtBtn:!1,rootId:0,TABLE_CONFIG:{field:{id:"id"},api:{query:this.$cfg.API.system.organization.query,delete:this.$cfg.API.system.organization.del}},columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"机构名称",key:"name",align:"center"},{title:"机构类型",key:"type",slot:"type",align:"center"},{title:"状态",key:"status",slot:"status",width:120,align:"center"},{title:"操作",align:"center",width:200,slot:"handle"}]}},filters:{typeFormatter:function(t){return 0==t?"本行":"他行"}},methods:{changeSelect:function(t){var e=this;e.rootId==t.id?e.showEidtBtn=!0:e.showEidtBtn=!1,e.filter.parentId=t.id,e.parterName=t.title,e.fetchData(!0,{pageNum:1})},setNode:function(t){this.filter.parentId=t.id,this.rootId=t.id,this.parterName=t.title,this.showEidtBtn=!0,this.fetchData(!0)},showAdd:function(){this.$refs.dialogform.show(null,{pName:this.parterName,parentId:this.filter.parentId})},showEdit:function(t,e){var a=k()(!0,{},e,{pName:this.parterName});this.$refs.dialogform.show(t,a)},showDetail:function(t,e,a){var r=k()(!0,{},e,{pName:this.parterName});this.$refs.dialogform.show(t,r,a)},setRootName:function(e){var a=this;this.$api(this.$cfg.API.system.organization.editName,{id:this.filter.parentId,name:e}).then(function(t){a.$Message.success("修改成功"),a.$refs.editname.close(),a.parterName=e,a.$refs.organtree.setNodeName(e)}).catch(function(t){a._showErrMsg(t,"修改失败")})}}},Pe=(a(380),Object(m.a)(Te,ve,[],!1,null,null,null));Pe.options.__file="src/components/manage/system/organization/index.vue";var ze=Pe.exports,Be=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"c-m-system-Permission"},[this._v("\n\t权限管理\n")])};Be._withStripped=!0;var Me=Object(m.a)({},Be,[],!1,null,null,null);Me.options.__file="src/components/manage/system/permission/index.vue";var Ae=Me.exports,je=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("div",{staticClass:"c-m-system-firstMerchant ui-box"},[n("bread-crumb",{attrs:{data:r.crumbData}}),r._v(" "),n("search",{staticClass:"ui-search",attrs:{data:r.filter},on:{search:r.fetchData}}),r._v(" "),n("div",{staticClass:"ui-hander"},[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:r.showAdd}},[r._v("新增")])],1),r._v(" "),n("div",{staticClass:"ui-table-content"},[n("Table",{attrs:{border:"",columns:r.columns,data:r.listData},on:{"on-selection-change":r.selectRow},scopedSlots:r._u([{key:"status",fn:function(t){var e=t.row,a=(t.column,t.index);return[n("i-switch",{staticClass:"ui-switch",attrs:{loading:e.switchLoading,"false-value":0,"true-value":1,size:"large"},on:{"on-change":function(t){return r.changeStatus(e,a)}},model:{value:e.startupStatus,callback:function(t){r.$set(e,"startupStatus",t)},expression:"row.startupStatus"}},[n("span",{attrs:{slot:"open"},slot:"open"},[r._v("启用")]),r._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[r._v("停用")])])]}},{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.showDetail(e.merchantId,e,!0)}}},[r._v("详情")]),r._v(" "),n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return r.showEdit(e.merchantId,e)}}},[r._v("编辑")]),r._v(" "),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return r.deleteData(e.merchantId)}}},[r._v("删除")])]}}])})],1),r._v(" "),n("div",{staticClass:"ui-page"},[n("Page",{attrs:{placement:"top",total:r.totalCount,current:r.filter.pageNum,"page-size":r.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":r.pageChange,"update:current":function(t){return r.$set(r.filter,"pageNum",t)}}})],1),r._v(" "),n("dialog-form",{ref:"form",on:{edit:r.fetchData,add:r.fetchData}})],1)},Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-first-merchant-search search-bar"},[a("Form",{attrs:{model:e.data,inline:"","label-width":90}},[a("FormItem",{attrs:{prop:"merchantId",label:"商户代码"}},[a("Input",{attrs:{placeholder:"商户代码"},model:{value:e.data.merchantId,callback:function(t){e.$set(e.data,"merchantId",t)},expression:"data.merchantId"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"merchantName",label:"商户名称"}},[a("Input",{attrs:{placeholder:"商户名称"},model:{value:e.data.merchantName,callback:function(t){e.$set(e.data,"merchantName",t)},expression:"data.merchantName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"startupStatus",label:"启用状态"}},[a("Select",{attrs:{placeholder:"启用状态"},model:{value:e.data.startupStatus,callback:function(t){e.$set(e.data,"startupStatus",t)},expression:"data.startupStatus"}},e._l(e.startupStatusOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("br"),e._v(" "),a("FormItem",[a("Button",{attrs:{icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{icon:"md-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)};Re._withStripped=je._withStripped=!0;var Le={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{startupStatusOptions:[{label:"未启用",value:0},{label:"启用",value:1}]}},methods:{search:function(){this.$emit("search")},reset:function(){this.data.merchantId="",this.data.merchantName="",this.data.startupStatus="",this.search()}}},qe=(a(381),Object(m.a)(Le,Re,[],!1,null,null,null));qe.options.__file="src/components/manage/merchant/first/search.vue";var Ge=qe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-m-merchant-first-dialog"},[a("Modal",{staticClass:"ui-form merchant-first-form",attrs:{"mask-closable":!1,title:e.title,width:"500"},on:{"on-cancel":e.close},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Form",{ref:"form",staticClass:"ui-tabel-body c",attrs:{rules:e.rules,model:e.formData,"label-width":100}},[a("FormItem",{attrs:{label:"一级商户编码",prop:"merchantId"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"一级商户编码"},model:{value:e.formData.merchantId,callback:function(t){e.$set(e.formData,"merchantId",t)},expression:"formData.merchantId"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商户名称",prop:"merchantName"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"商户名称"},model:{value:e.formData.merchantName,callback:function(t){e.$set(e.formData,"merchantName",t)},expression:"formData.merchantName"}})],1),e._v(" "),a("FormItem",{staticClass:"upload-certFile",attrs:{label:"商户证书",prop:"merchantCertFile"}},[a("Input",{attrs:{disabled:e.unEdit,readonly:"",placeholder:"请上传商户证书"},model:{value:e.formData.merchantCertFile,callback:function(t){e.$set(e.formData,"merchantCertFile",t)},expression:"formData.merchantCertFile"}}),e._v(" "),a("Button",{attrs:{icon:"ios-cloud-upload-outline",type:"primary",disabled:e.unEdit},on:{click:e.upload}},[e._v(e._s(e.textFormatter))])],1),e._v(" "),a("FormItem",{attrs:{label:"证书密码",prop:"merchantCertPassword"}},[a("Input",{attrs:{disabled:e.unEdit,placeholder:"证书密码"},model:{value:e.formData.merchantCertPassword,callback:function(t){e.$set(e.formData,"merchantCertPassword",t)},expression:"formData.merchantCertPassword"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.close}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.loading||e.saving||e.unEdit,loading:e.saving},on:{click:e.save}},[e._v("保存")])],1),e._v(" "),a("upload-model",{ref:"uploadmodel",attrs:{url:e.urlPath,option:e.uploadOption},on:{done:e.done}})],1)],1)};Ue._withStripped=!0;var He=a(163),Je=/^[0-9a-zA-Z]*$/,We={mixins:[Jt],components:{UploadModel:He.a},data:function(){return{uploadOption:{maxSize:2048,format:["pfx"],name:"cerFile",tip:"请上传pfx文件,大小不超过2M"},FORM_CONFIG:{field:{id:"merchantId"},api:{add:this.$cfg.API.merchant.first.add,edit:this.$cfg.API.merchant.first.edit}},formData:{merchantId:"",merchantName:"",merchantCertFile:"",merchantCertPassword:""},rules:{merchantId:[{required:!0,message:"请填写一级商户代码",trigger:"blur"},{validator:this.checkNum,trigger:"blur"}],merchantName:[{required:!0,message:"请填写商户名称",trigger:"blur"}],merchantCertFile:[{required:!0,message:"请上传证书",trigger:"change"}],merchantCertPassword:[{required:!0,message:"请填写商户私钥加密密码",trigger:"blur"}]}}},computed:{urlPath:function(){return T.c.completion(this.$cfg.API.merchant.first.uploadCerFil)},textFormatter:function(){return this.id?"重新上传":"上传证书"}},methods:{checkNum:function(t,e,a){if(!Je.test(e))return a(new Error("请输入数字或字母"));a()},upload:function(){this.$refs.uploadmodel.show()},done:function(t){this.formData.merchantCertFile=t.merchantCertFile}}},Qe=(a(383),Object(m.a)(We,Ue,[],!1,null,null,null));Qe.options.__file="src/components/manage/merchant/first/form.vue";var Ze=Qe.exports,Ke={mixins:[Qt],components:{BreadCrumb:Rt.a,Search:Ge,DialogForm:Ze},data:function(){return{crumbData:["商户管理","一级商户管理"],filter:{merchantId:"",merchantName:"",startupStatus:""},TABLE_CONFIG:{field:{id:"merchantId"},api:{query:this.$cfg.API.merchant.first.query,delete:this.$cfg.API.merchant.first.del}},columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"一级商户编码",key:"merchantId",align:"center"},{title:"商户名称",key:"merchantName",align:"center"},{title:"商户证书",key:"merchantCertFile",align:"center"},{title:"证书密码",key:"merchantCertPassword",align:"center"},{title:"启用状态",align:"center",width:120,slot:"status"},{title:"操作",align:"center",width:200,slot:"handle"}]}},methods:{showAdd:function(){this.$refs.form.show()},showEdit:function(t,e){this.$refs.form.show(t,e)},showDetail:function(t,e,a){this.$refs.form.show(t,e,a)},changeStatus:function(t,e){var a=this,r=t.merchantId,n=t.startupStatus;a.$set(a.listData[e],"switchLoading",!0),console.log(r,n),a.$api(a.$cfg.API.merchant.first.updateStatus,{merchantId:r,startupStatus:n}).then(function(t){a.$set(a.listData[e],"startupStatus",n),a.$set(a.listData[e],"switchLoading",!1),a.$Message.success("状态修改成功")}).catch(function(t){a.$set(a.listData[e],"startupStatus",1==n?0:1),a.$set(a.listData[e],"switchLoading",!1),a._showErrMsg(t,"状态修改失败")})}}},Xe=Object(m.a)(Ke,je,[],!1,null,null,null);Xe.options.__file="src/components/manage/merchant/first/index.vue";var Ye=Xe.exports,Ve=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"c-m-system-secondMerchant"},[this._v("\n\t二级商户管理\n")])};Ve._withStripped=!0;var ta=Object(m.a)({},Ve,[],!1,null,null,null);ta.options.__file="src/components/manage/merchant/second/index.vue";var ea=function(){return a.e(7).then(a.bind(null,413))},aa=[{path:"/system",component:ea,meta:{authName:"system-setting",groupName:"system"},children:[{path:"user",name:"user",meta:{authName:"system-setting-user",groupName:"system"},component:ae},{path:"role",name:"role",meta:{authName:"system-setting-role",groupName:"system"},component:pe},{path:"organ",name:"organ",meta:{authName:"system-setting-organ",groupName:"system"},component:ze},{path:"auth",name:"auth",meta:{authName:"system-setting-auth",groupName:"system"},component:Ae}]},{path:"/access",component:ea,meta:{authName:"material-manage",groupName:"material"},children:[{path:"material",name:"material",meta:{authName:"material-manage-second",groupName:"material"},component:function(){return a.e(3).then(a.bind(null,409))}}]},{path:"/merchant",component:ea,meta:{authName:"merchant-manage",groupName:"merchant"},children:[{path:"first",name:"first",meta:{authName:"merchant-manage-first",groupName:"merchant"},component:Ye},{path:"second",name:"second",meta:{authName:"merchant-manage-second",groupName:"merchant"},component:ta.exports}]}];var ra,na={namespaced:!0,state:{permissionList:[],authList:[]},mutations:{setPermission:function(t,e){t.permissionList=e},setAuthArray:function(t,e){t.authList=e}},actions:{FETCH_PERMISSION:(ra=Tt()(xt.a.mark(function t(e){var a,r,n,o,s,i,l,c;return xt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,Nt(u.commons.getPermission,"",{showLoading:!0});case 3:n=t.sent,o=Pt(n.result.permissionList,aa),(a=(s=At)[0].children).push.apply(a,Ot()(o)),y.addRoutes(s),r("setPermission",s),i=Bt(n.result.permissionList),r("setAuthArray",i),console.log(i,"我是操作权限"),l=n.result.roleName,c=n.result.userName,r("info/setCommonInfo",{roleName:l,userName:c},{root:!0});case 15:case"end":return t.stop()}},t)})),function(t){return ra.apply(this,arguments)})}};r.default.use(w.a);var oa=new w.a.Store({modules:{info:kt,rbac:na}});r.default.mixin({methods:{_showErrMsg:function(t,e){var a="";(a=100==(t.data&&t.data.code?t.data.code:200)?t.data&&t.data.message?t.data.message:t.message:e)&&this.$Message.error({content:a,closable:!0})},_auth:function(a){return 0<(this.$store.state.rbac.authList||[]).filter(function(t,e){return t.authName==a}).length}}});var sa=a(39),ia=a(61);function la(e,t){var a="";return Object(T.a)(t)&&t.findIndex(function(t){if(t.value==e)return a=t.label,!0}),a}function ca(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return 0<String(t).indexOf(".")&&(t=t.toFixed(e).replace(/\.0+$|0+$/,"")),t}r.default.filter("selectLabel",la),r.default.filter("fileType",function(t){return la(t,i.typeLabel)}),r.default.filter("fileThumb",function(t,e){switch(e){case"studio":return t||s.cover.studioCourse;case"study":return t||s.cover.studyCourse;default:return t||s.cover.resource}}),r.default.filter("sum",function(t,a){var r=0;return t&&Object(T.a)(t)&&t.forEach(function(t){var e="object"==D()(t)?t[a]:t;r+=parseInt(e)}),r}),r.default.filter("fileStatus",function(t){switch(t){case i.status.trans:return"转码中";case i.status.normal:return"上传成功";case i.status.transFail:return"转码失败";case i.status.uploadFail:return"上传失败";default:return"未知"}}),r.default.filter("dataSource",function(t){switch(t){case 1:return"资源平台";case 2:return"智课堂";case 3:return"MReal"}}),r.default.filter("permission",function(t){switch(t){case 1:return"管理员";case 2:default:return"教师"}}),r.default.filter("numberFixed",ca),r.default.filter("percentFormat",function(t){var e=Math.min(100*t,100);return isNaN(e)?0:e=ca(e)}),r.default.filter("priceFormat",function(t,e){var a=ca(t/100);return e?e+a:a}),r.default.filter("discountFormat",function(t,e){return ca(t/e*10)+"折"});var ua=/\n/g;r.default.filter("line2br",function(t){return(t||"").replace(ua,"<br>")}),r.default.filter("size",sa.a),r.default.filter("secondFormat",ia.b),r.default.filter("dateFormat",ia.a),r.default.filter("prefix",function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"0";return Object(P.a)(t,e,a)});a(120),a(384);r.default.use(n.a),r.default.use(B.a),r.default.use(c),y.beforeEach(function(t,e,a){oa.state.info.UserToken?oa.state.rbac.permissionList.length?(t.name,a()):oa.dispatch("rbac/FETCH_PERMISSION").then(function(){a({path:t.path})}):"login"===t.name?a():"/"===t.path?a({name:"login"}):a({name:"login",query:{path:t.path}})}),new r.default({el:"#manage",store:oa,router:y,render:function(t){return t(f)}})},39:function(t,e,a){"use strict";function r(t,e){if(e=e||"",0===t)return"0"+e+"B";var a=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,a)).toPrecision(3)+e+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}a.d(e,"a",function(){return r})},40:function(t,e){t.exports=iview},56:function(t,e,a){"use strict";a.r(e),a.d(e,"parse",function(){return c}),a.d(e,"compose",function(){return u}),a.d(e,"getParam",function(){return d}),a.d(e,"getvar",function(){return m}),a.d(e,"paramToObj",function(){return h}),a.d(e,"parseParam",function(){return f}),a.d(e,"encode",function(){return p}),a.d(e,"join",function(){return v}),a.d(e,"completion",function(){return g});var r,n,o=a(19),i=a.n(o),s=/^(?:([^/]*:)\/\/(?:([^:]*)(?::(.*))?@)?([^:/]+)(:\d+)?)?([^?#]+)?(\?[^#]*)?(#.*)?$/,l=/(.*?)\[(\d+)\]/;function c(t,e){return t=t.toString(),n||"undefined"==typeof document||(n=document.createElement("a")),e&&n?(n.setAttribute("href",t),{protocol:n.protocol,username:decodeURIComponent(n.username),password:decodeURIComponent(n.password),host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,hash:n.hash}):function(t){"//"!=t.substr(0,2)&&"://"!=t.substr(0,3)||(t=("undefined"==typeof location?"http:":location.protocol)+t);var e=t.match(s)||[],a={protocol:e[1]||"",username:decodeURIComponent(e[2]||""),password:decodeURIComponent(e[3]||""),host:e[4]||"",hostname:e[4]||"",port:e[5]?e[5].substr(1):"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""};"http:"==a.protocol&&"80"==a.port?a.port="":"https:"==a.protocol&&"443"==a.port&&(a.port="");a.port&&(a.host+=":"+a.port);return a}(t)}function u(t){var e=t.protocol,a=t.username,r=t.password,n=t.host,o=t.pathname,s=t.search,i=t.hash,l="";return e&&(":"==e?e="":e+="//"),(a||r)&&(a&&(l+=encodeURIComponent(a)),r&&(l+=":"+encodeURIComponent(r)),l+="@"),e+l+n+o+s+i}function d(t){return r||(r=h(window.location.href)),t?r[t]:r}function m(t,e){var a=t.split("?");if(2!=a.length)return!1;for(var r=a[1].split("&"),n=r.length-1;0<=n;n--){var o=r[n].split("=");if(o[0]==e)return o[1]}return!1}function h(t){var n={},e=c(t,!0);return e.search&&e.search.substring(e.search.indexOf("?")+1).split("&").forEach(function(t){var e=t.split("=");if(e[0]){e[1]=e[1]?decodeURIComponent(e[1]):"";var a=e[0].match(l);if(a)void 0===n[a[1]]&&(n[a[1]]=[]),n[a[1]][a[2]]=e[1];else{var r=n[e[0]];n[e[0]]=(r?r+",":"")+e[1]}}}),n}function f(t,e){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(null==t)return"";var r="",n=i()(t);if("string"==n||"number"==n||"boolean"==n)r+="&"+e+"="+(a?encodeURIComponent(t):t);else for(var o in t){var s=null==e?o:e+(t instanceof Array?"["+o+"]":"."+o);r+=f(t[o],s,a)}return r}function p(){var t=f.apply(this,arguments);return"&"==t.substr(0,1)&&(t=t.substring(1)),t}function v(t,e){if(!e)return t;var a="";if(!(a="string"==typeof e?e:p(e)))return t;var r=c(t);return r.search+=(-1==r.search.indexOf("?")?"?":"&")+a,u(r)}function g(t,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";a||(a="https://www.easy-mock.com/mock/5c983285748d442f4b43f26b/resource/".replace(/([^:])\/{2,}/g,"$1/"));var r=c(t),n=r.pathname.indexOf(":");-1<n&&n<=7&&(r.pathname=r.pathname.substring(n+1)),r.protocol&&":"!=r.protocol||(r.pathname=(a+r.pathname).replace(/\/{2,}/,"/"));var o="";return(o="string"==typeof e?e:p(e))&&(r.search+=(-1==r.search.indexOf("?")?"?":"&")+o),u(r)}},61:function(t,e,a){"use strict";function r(t){var e,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";return t&&(t=(e=t)?e instanceof Date?e:(e=e.toString().replace("T"," "),e=/^(\d{10}|\d{13})$/g.test(e)?new Date(parseInt(10==e.length?1e3*e:e)):new Date(e.replace(/-/g,"/")),isNaN(e.getDate())?null:e):null)?s(a,{y:t.getFullYear()+"",M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds(),W:["日","一","二","三","四","五","六"][t.getDay()]}):""}function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[hh:]mm:ss";return t=parseInt(t),isNaN(t)?"":s(e,{h:Math.floor(t/3600),m:Math.floor(t/60%60),s:Math.floor(t%60)})}a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n});var o=/\[(([yMdhmsqSW])+)(.*?)\]|(([yMdhmsqSW])+)/g;function s(t,c){return t&&c?t.replace(o,function(t,e,a,r,n,o){var s=a||o,i=e||n,l=c[s];return void 0!==l?e&&!l?"":"y"===s?l.substr(4-i.length)+(r||""):(1<i.length&&(l=(l="0"+l).substr(l.length-2)),l+(r||"")):t}):""}},75:function(t,e,a){},76:function(t,e,a){},78:function(t,e,a){},79:function(t,e,a){},80:function(t,e,a){},81:function(t,e,a){},82:function(t,e,a){},83:function(t,e,a){},84:function(t,e,a){},85:function(t,e,a){},86:function(t,e,a){},87:function(t,e,a){}});