(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{366:function(t,e,a){},367:function(t,e,a){"use strict";var n=a(366);a.n(n).a},368:function(t,e,a){"use strict";var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"ui-bread-crumb"},[n("Breadcrumb",a._l(a.data,function(t,e){return n("BreadcrumbItem",{key:e},[a._v(a._s(t))])}),1)],1)};n._withStripped=!0;var r={props:{data:{type:Array,default:function(){return[]}}}},i=(a(367),a(47)),s=Object(i.a)(r,n,[],!1,null,null,null);s.options.__file="src/components/manage/common/bread-crumb.vue";e.a=s.exports},369:function(t,e,a){"use strict";var n=a(18),s=a.n(n),r=a(108),i=a.n(r);e.a={data:function(){return{TABLE_CONFIG:{field:{id:"id"},api:{query:"",delete:""}},filter:{pageNum:1,pageSize:15,sort:""},autoLoad:!0,loading:!0,listData:[],totalCount:0,pickedId:[],usePage:!0,useRouterQuery:!1}},beforeRouteUpdate:function(t,e,a){if(this.useRouterQuery){var n=t.query.page||1;this.filter.pageNum=parseInt(n),this.fetchData(),a()}else a()},methods:{fetchData:function(t,e){var a=this;this.TABLE_CONFIG.api.query&&(!t&&this.loading||(this.beforeFetch&&this.beforeFetch(),e=s()({},this.filter,e),this.loading=!0,this.$api(this.TABLE_CONFIG.api.query,e,{showLoading:!0}).then(function(t){a.loading=!1,a.filter=e,a.parseData(t.result),a.afterFetch&&a.afterFetch()}).catch(function(t){a.loading=!1,a._showErrMsg(t)})))},parseData:function(t){this.usePage?(this.listData=t.records,this.totalCount=t.total):(this.listData=t,this.totalCount=t.length)},deleteData:function(t,e){if(this.TABLE_CONFIG.api.delete){var a=this,n=[],r="确定删除该条数据么?";if(t?n.push(t):(n=a.pickedId,r="确定删除选中的数据么?"),!n.length)return a.$Message.warning("未选择任何数据"),!1;var i=s()({},e);i[a.TABLE_CONFIG.field.id]=n.join(","),a._asyncDialog(r,i)}},_asyncDialog:function(t,e){var a=this;a.$Modal.confirm({title:"警告",content:"<p>".concat(t,"</p>"),loading:!0,onOk:function(){a.$api(a.TABLE_CONFIG.api.delete,e).then(function(t){a.$Modal.remove(),a.$Message.success("删除成功"),a.usePage?a.fetchData():a.__delListData(ids)}).catch(function(t){setTimeout(function(){a.$Modal.remove()},500),a._showErrMsg(t)})}})},__delListData:function(a){var n=this;this.listData.forEach(function(t,e){~a.indexOf(t[n.TABLE_CONFIG.field.id])&&n.listData.splice(e,1)})},selectRow:function(t){var e=this,a=[];t.forEach(function(t){a.push(t[e.TABLE_CONFIG.field.id])}),this.pickedId=a},sortData:function(t){t.order?this.filter.sort="ascending"==t.order?2:1:this.filter.sort="",this.fetchData()},pageChange:function(t){if(this.beforePageChange&&this.beforePageChange(t),this.useRouterQuery){var e=this.$route;if((e.query.page||1)==this.filter.pageNum)return;var a={name:e.name,meta:s()({},e.meta),params:s()({},e.params),query:s()({},e.query)};a.query.page=t,e.name||(a.path=e.path),this.$router.push(a)}else this.fetchData();this.afterPageChange&&this.afterPageChange(t)},pushData:function(t){this.listData.unshift(t),this.listData.splice(this.filter.pageSize),this.totalCount++},updateData:function(n){var r=this,i=-1;this.listData.forEach(function(t,e){var a=t[r.TABLE_CONFIG.field.id];a&&a==n[r.TABLE_CONFIG.field.id]&&(i=e)}),-1!=i&&this.$set(this.listData,i,n)}},created:function(){this.fetchDataHandle=i()(this.fetchData,200);var t=this.$route.query.page;t&&(this.filter.pageNum=parseInt(t)),this.autoLoad&&this.fetchData(!0)}}},370:function(t,e,a){"use strict";var n=a(18),r=a.n(n);e.a={data:function(){return{FORM_CONFIG:{field:{id:"id"},api:{info:"",add:"",edit:""}},id:0,inited:!1,formData:{},rules:{},dialogShow:!1,loading:!1,hasEdited:!1,saving:!1,labelWidth:"7em",unEdit:!1}},computed:{title:function(){return this.id?"编辑":"添加"}},watch:{formData:{handler:function(){this.inited&&(this.hasEdited=!0)},deep:!0}},methods:{show:function(t,e,a){this.id=t||0,this.unEdit=a||!1,this.dialogShow=!0,e?this.setFormData(e):this.id?this.fetchData():this.setFormData(this._defaultFormData)},close:function(t){this.hasEdited,this.closeHandle(),"function"==typeof t&&t()},closeHandle:function(){this.dialogShow=!1,this.resetTimer=setTimeout(this.reset,300)},fetchData:function(){var e=this;if(this.FORM_CONFIG.api.info&&!this.loading){var t={};t[this.FORM_CONFIG.field.id]=this.id,this.loading=!0,this.$api(this.FORM_CONFIG.api.info,t).then(function(t){e.setFormData(t.result),e.loading=!1}).catch(function(t){e.loading=!1,e._showErrMsg(t)})}},setFormData:function(t){var e=this;this.formData=r()(!0,{},t),this.$refs.form.resetFields(),this.onSetFormData&&this.onSetFormData(),this.$nextTick(function(){e.inited=!0})},save:function(){var e=this;this.saving||this.$refs.form.validate(function(t){t&&e.post()})},post:function(){var e=this,a=this.id?"edit":"add",t=this.FORM_CONFIG.api[a];if(t&&(!this.beforeSave||!1!==this.beforeSave())){this.saving=!0;var n=this.parsePostData?this.parsePostData():this.formData;this.$api(t,n).then(function(t){e.$emit(a,t.result),e.saving=!1,e.hasEdited=!1,e.$Message.success("保存成功"),e.close(),e.onSuccess&&e.onSuccess(t)}).catch(function(t){e._showErrMsg(t),e.saving=!1,e.onFail&&e.onFail(t)})}},reset:function(){clearTimeout(this.resetTimer),this.inited=!1,this.hasEdited=!1;var t=this.$refs.form;t&&t.resetFields()}},created:function(){this._defaultFormData=r()(!0,{},this.formData)}}},394:function(t,e,a){},395:function(t,e,a){},396:function(t,e,a){},397:function(t,e,a){},398:function(t,e,a){},422:function(t,e,a){"use strict";var n=a(394);a.n(n).a},423:function(t,e,a){"use strict";var n=a(395);a.n(n).a},424:function(t,e,a){"use strict";var n=a(396);a.n(n).a},425:function(t,e,a){"use strict";var n=a(397);a.n(n).a},426:function(t,e,a){"use strict";var n=a(398);a.n(n).a},428:function(t,e,a){"use strict";a.r(e);var n=function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{directives:[{name:"title",rawName:"v-title",value:n.pageTitle,expression:"pageTitle"}],staticClass:"c-m-system-secondMerchant ui-box"},[r("bread-crumb",{attrs:{data:n.crumbData}}),n._v(" "),r("search",{staticClass:"ui-search",attrs:{data:n.filter},on:{search:n.fetchData}}),n._v(" "),r("div",{staticClass:"ui-table-content"},[r("Table",{attrs:{border:"",columns:n.columns,data:n.listData},scopedSlots:n._u([{key:"merchanttype",fn:function(t){var e=t.row;return[n._v("\n\t\t\t\t"+n._s(n._f("merchantType")(e.subMerType))+"\n\t\t\t")]}},{key:"status",fn:function(t){var e=t.row;t.column,t.index;return[r("span",{class:n._f("statusColor")(e.status)},[n._v(n._s(n._f("statusText")(e.status)))])]}},{key:"handlestatus",fn:function(t){var e=t.row,a=(t.column,t.index);return[r("i-switch",{staticClass:"ui-switch",attrs:{disabled:!n._auth("merchant-manage-second-setStatus"),loading:e.switchLoading,"false-value":"0","true-value":"1",size:"large"},on:{"on-change":function(t){return n.changeStatusConfirm(e,a)}},model:{value:e.status,callback:function(t){n.$set(e,"status",t)},expression:"row.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[n._v("启用")]),n._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[n._v("停用")])])]}},{key:"handle",fn:function(t){var e=t.row;t.column,t.index;return[n._auth("merchant-manage-second-detail")?r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return n.showDetail(e.id,e,!0)}}},[n._v("详情")]):n._e(),n._v(" "),n._auth("merchant-manage-second-del")?r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return n.deleteData(e.id)}}},[n._v("删除")]):n._e()]}}])})],1),n._v(" "),r("div",{staticClass:"ui-page"},[r("Page",{attrs:{placement:"top",total:n.totalCount,current:n.filter.pageNum,"page-size":n.filter.pageSize,"show-elevator":"","show-total":""},on:{"on-change":n.pageChange,"update:current":function(t){return n.$set(n.filter,"pageNum",t)}}})],1),n._v(" "),r("dialog-form",{ref:"dialogform"})],1)};n._withStripped=!0;var r=a(368),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-second-merchant-search search-bar"},[a("Form",{attrs:{model:e.data,inline:"","label-width":120}},[a("FormItem",{attrs:{prop:"incomingNo",label:"进件单号"}},[a("Input",{attrs:{placeholder:"进件单号"},model:{value:e.data.incomingNo,callback:function(t){e.$set(e.data,"incomingNo",t)},expression:"data.incomingNo"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"merchantId",label:"一级商户编码"}},[a("Input",{attrs:{placeholder:"一级商户编码"},model:{value:e.data.merchantId,callback:function(t){e.$set(e.data,"merchantId",t)},expression:"data.merchantId"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"subMerId",label:"二级商户编码"}},[a("Input",{attrs:{placeholder:"二级商户编码"},model:{value:e.data.subMerId,callback:function(t){e.$set(e.data,"subMerId",t)},expression:"data.subMerId"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"subMerName",label:"二级商户名称"}},[a("Input",{attrs:{placeholder:"二级商户名称"},model:{value:e.data.subMerName,callback:function(t){e.$set(e.data,"subMerName",t)},expression:"data.subMerName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"contactName",label:"法定代表人"}},[a("Input",{attrs:{placeholder:"法定代表人"},model:{value:e.data.contactName,callback:function(t){e.$set(e.data,"contactName",t)},expression:"data.contactName"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"companyName",label:"企业名称"}},[a("Input",{attrs:{placeholder:"企业名称"},model:{value:e.data.companyName,callback:function(t){e.$set(e.data,"companyName",t)},expression:"data.companyName"}})],1),e._v(" "),a("br"),e._v(" "),a("FormItem",[a("Button",{attrs:{icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{icon:"md-refresh"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)};i._withStripped=!0;var s={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{search:function(){this.$emit("search")},reset:function(){var t=this;t.data.incomingNo="",t.data.merchantId="",t.data.subMerId="",t.data.subMerName="",t.data.contactName="",t.data.companyName="",t.search()}}},o=(a(422),a(47)),c=Object(o.a)(s,i,[],!1,null,null,null);c.options.__file="src/components/manage/merchant/second/search.vue";var l=c.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-materials-second-form"},[a("Modal",{staticClass:"ui-form",attrs:{"mask-closable":!1,title:e.title,width:"600"},on:{"on-cancel":e.closeDefind},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("Steps",{staticClass:"ui-steps",attrs:{current:e.current,size:"small"}},[a("Step",{attrs:{title:"基础信息"}}),e._v(" "),a("Step",{attrs:{title:"结算信息"}}),e._v(" "),a("Step",{attrs:{title:"进件信息"}})],1),e._v(" "),a("Form",{ref:"form",attrs:{model:e.formData,"label-width":130}},[a("base-info",{directives:[{name:"show",rawName:"v-show",value:0==e.current,expression:"current==0"}],attrs:{data:e.formData,unedit:e.unEdit}}),e._v(" "),a("check-info",{directives:[{name:"show",rawName:"v-show",value:1==e.current,expression:"current==1"}],attrs:{data:e.formData,unedit:e.unEdit}}),e._v(" "),a("into-info",{directives:[{name:"show",rawName:"v-show",value:2==e.current,expression:"current==2"}],attrs:{data:e.formData,unedit:e.unEdit}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.closeDefind}},[e._v("取消")]),e._v(" "),e.showPrev?a("Button",{on:{click:e.prev}},[a("Icon",{attrs:{type:"ios-skip-backward"}}),e._v(" 上一步")],1):e._e(),e._v(" "),e.showNext?a("Button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步 "),a("Icon",{attrs:{type:"ios-skip-forward"}})],1):e._e()],1)],1)],1)},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-merchant-second-form-base-info"},[a("FormItem",{attrs:{label:"一级商户编号",prop:"merchantId",rules:e.rules.merchantId}},[a("Select",{attrs:{disabled:e.unedit,placeholder:"选择一级商户"},model:{value:e.data.merchantId,callback:function(t){e.$set(e.data,"merchantId",t)},expression:"data.merchantId"}},e._l(e.merchantOption,function(t){return a("Option",{key:t.merchantId,attrs:{value:t.merchantId}},[e._v(e._s(t.merchantName))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"二级商户名称",prop:"subMerName",rules:e.rules.subMerName}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"商户名称"},model:{value:e.data.subMerName,callback:function(t){e.$set(e.data,"subMerName",t)},expression:"data.subMerName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"二级商户类型",prop:"subMerType",rules:e.rules.subMerType}},[a("Select",{attrs:{disabled:e.unedit,placeholder:"二级商户类型"},model:{value:e.data.subMerType,callback:function(t){e.$set(e.data,"subMerType",t)},expression:"data.subMerType"}},e._l(e.subMerTypeOption,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"法定代表人",prop:"contactName",rules:e.rules.contactName}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"法定代表人"},model:{value:e.data.contactName,callback:function(t){e.$set(e.data,"contactName",t)},expression:"data.contactName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"法定代表人证件类型",prop:"certificateType",rules:e.rules.certificateType}},[a("Select",{attrs:{disabled:e.unedit,placeholder:"法定代表人证件类型"},model:{value:e.data.certificateType,callback:function(t){e.$set(e.data,"certificateType",t)},expression:"data.certificateType"}},e._l(e.certificateTypeOption,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"法定代表人证件编号",prop:"certificateNo",rules:e.rules.certificateNo}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"法定代表人证件编号"},model:{value:e.data.certificateNo,callback:function(t){e.$set(e.data,"certificateNo",t)},expression:"data.certificateNo"}})],1),e._v(" "),a("FormItem",{attrs:{label:"企业名称",prop:"companyName",rules:e.rules.companyName}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"企业名称"},model:{value:e.data.companyName,callback:function(t){e.$set(e.data,"companyName",t)},expression:"data.companyName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"企业证件类型",prop:"companyCertType",rules:e.rules.companyCertType}},[a("Select",{attrs:{disabled:e.unedit,placeholder:"企业证件类型"},model:{value:e.data.companyCertType,callback:function(t){e.$set(e.data,"companyCertType",t)},expression:"data.companyCertType"}},e._l(e.companyCertTypeOption,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"企业证件编号",prop:"companyCertNo",rules:e.rules.companyCertNo}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"企业证件编号"},model:{value:e.data.companyCertNo,callback:function(t){e.$set(e.data,"companyCertNo",t)},expression:"data.companyCertNo"}})],1)],1)};d._withStripped=u._withStripped=!0;var m={props:{data:{type:Object,default:function(){return{}}},unedit:{type:Boolean,default:function(){return!1}}},data:function(){return{merchantOption:[],subMerTypeOption:[{label:"个人商户",value:"1"},{label:"企业商户",value:"2"}],certificateTypeOption:[{label:"身份证",value:"I"},{label:"护照",value:"P"},{label:"军官证",value:"G"},{label:"其他证件",value:"U"}],companyCertTypeOption:[{label:"营业执照",value:"U"},{label:"组织机构代码",value:"Y"},{label:"统一社会信用代码",value:"V"}],rules:{merchantId:[{required:!0,message:"请选择一级商户",trigger:"change"}],subMerName:[{required:!0,message:"请填写二级商户名称",trigger:"blur"}],subMerType:[{required:!0,message:"请选择二级商户类型",trigger:"change"}],contactName:[{required:!0,message:"请填写法定代表人",trigger:"blur"}],certificateType:[{required:!0,message:"请选择法定代表人证件类型",trigger:"change"}],certificateNo:[{required:!0,message:"请填写法定代表人证件编号",trigger:"blur"},{validator:this.checkIdNumber,trigger:"blur"}],companyName:[{required:!0,message:"请填写企业名称",trigger:"blur"}],companyCertType:[{required:!0,message:"请选择企业证件类型",trigger:"change"}],companyCertNo:[{required:!0,message:"请填写企业证件编号",trigger:"blur"}]}}},methods:{checkIdNumber:function(t,e,a){var n=this.data.certificateType,r=this.$cfg.REG.idNumber;if("I"==n&&e&&!r.test(e))return a(new Error("请输入正确的身份证号"));a()},fetchFirstMerchant:function(){var e=this;e.merchantOption.length||e.$api(e.$cfg.API.merchant.first.query,{pageNum:1,pageSize:1e3}).then(function(t){e.merchantOption=t.result.records||[]}).catch(function(){})}},created:function(){this.$bus.on("fetchFirstMerchant",this.fetchFirstMerchant)},beforeDestroy:function(){this.$bus.off("fetchFirstMerchant",this.fetchFirstMerchant)}},p=(a(423),Object(o.a)(m,d,[],!1,null,null,null));p.options.__file="src/components/manage/merchant/second/base-info.vue";var h=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-merchant-second-form-check-info"},[a("FormItem",{attrs:{label:"收款账户名",prop:"accountName",rules:e.rules.accountName}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"收款账户名"},model:{value:e.data.accountName,callback:function(t){e.$set(e.data,"accountName",t)},expression:"data.accountName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"收款银行",prop:"bankName",rules:e.rules.bankName}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"收款银行"},model:{value:e.data.bankName,callback:function(t){e.$set(e.data,"bankName",t)},expression:"data.bankName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"收款账号",prop:"account",rules:e.rules.account}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"收款账号"},model:{value:e.data.account,callback:function(t){e.$set(e.data,"account",t)},expression:"data.account"}})],1),e._v(" "),a("FormItem",{attrs:{label:"收款账户类型",prop:"accountType",rules:e.rules.accountType}},[a("Select",{attrs:{disabled:e.unedit,placeholder:"收款账户类型"},model:{value:e.data.accountType,callback:function(t){e.$set(e.data,"accountType",t)},expression:"data.accountType"}},e._l(e.accountTypeOption,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("FormItem",{attrs:{label:"银行预留手机号",prop:"mobilePhone",rules:e.rules.mobilePhone}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"银行预留手机号"},model:{value:e.data.mobilePhone,callback:function(t){e.$set(e.data,"mobilePhone",t)},expression:"data.mobilePhone"}})],1),e._v(" "),a("FormItem",{attrs:{label:"地址",prop:"address"}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"地址"},model:{value:e.data.address,callback:function(t){e.$set(e.data,"address",t)},expression:"data.address"}})],1),e._v(" "),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{readonly:e.unedit,type:"textarea",placeholder:"备注"},model:{value:e.data.remark,callback:function(t){e.$set(e.data,"remark",t)},expression:"data.remark"}})],1)],1)};f._withStripped=!0;var g={props:{data:{type:Object,default:function(){return{}}},unedit:{type:Boolean,default:function(){return!1}}},data:function(){return{accountTypeOption:[{label:"借记卡",value:"401"},{label:"支票户",value:"601"}],rules:{accountName:[{required:!0,message:"请填写收款账户名",trigger:"blur"}],bankName:[{required:!0,message:"请填写收款银行",trigger:"blur"}],account:[{required:!0,message:"请填写收款账号",trigger:"blur"}],accountType:[{required:!0,message:"请选择收款账户类型",trigger:"change"}],mobilePhone:[{required:!0,message:"请填写银行预留手机号",trigger:"blur"},{validator:this.checkPhone,trigger:"blur"}]}}},methods:{checkPhone:function(t,e,a){var n=this.$cfg.REG.phone;if(e&&!n.test(e))return a(new Error("请输入正确的手机号"));a()}}},v=(a(424),Object(o.a)(g,f,[],!1,null,null,null));v.options.__file="src/components/manage/merchant/second/check-info.vue";var b=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-merchant-second-form-into-info"},[a("FormItem",{attrs:{label:"进件员",prop:"incomingUser",rules:e.rules.incomingUser}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"进件员"},model:{value:e.data.incomingUser,callback:function(t){e.$set(e.data,"incomingUser",t)},expression:"data.incomingUser"}})],1),e._v(" "),a("FormItem",{attrs:{label:"进件时间",prop:"incomingDate",rules:e.rules.incomingDate}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"进件时间"},model:{value:e.data.incomingDate,callback:function(t){e.$set(e.data,"incomingDate",t)},expression:"data.incomingDate"}})],1),e._v(" "),a("FormItem",{attrs:{label:"进件订单编号",prop:"incomingNo",rules:e.rules.incomingNo}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"进件订单编号"},model:{value:e.data.incomingNo,callback:function(t){e.$set(e.data,"incomingNo",t)},expression:"data.incomingNo"}})],1),e._v(" "),a("FormItem",{attrs:{label:"进件机构",prop:"incomingOrganization",rules:e.rules.incomingOrganization}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"进件机构"},model:{value:e.data.incomingOrganization,callback:function(t){e.$set(e.data,"incomingOrganization",t)},expression:"data.incomingOrganization"}})],1),e._v(" "),a("FormItem",{attrs:{label:"审核员",prop:"auditingUser",rules:e.rules.auditingUser}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"审核员"},model:{value:e.data.auditingUser,callback:function(t){e.$set(e.data,"auditingUser",t)},expression:"data.auditingUser"}})],1),e._v(" "),a("FormItem",{attrs:{label:"批准时间",prop:"auditingDate",rules:e.rules.auditingDate}},[a("Input",{attrs:{readonly:e.unedit,placeholder:"批准时间"},model:{value:e.data.auditingDate,callback:function(t){e.$set(e.data,"auditingDate",t)},expression:"data.auditingDate"}})],1)],1)};y._withStripped=!0;var _={props:{data:{type:Object,default:function(){return{}}},unedit:{type:Boolean,default:function(){return!1}}},data:function(){return{rules:{incomingUser:[{required:!0,message:"请填写进件员",trigger:"blur"}],incomingDate:[{required:!0,message:"请填写进件时间",trigger:"blur"}],incomingNo:[{required:!0,message:"请填写进件订单编号",trigger:"blur"}],incomingOrganization:[{required:!0,message:"请填写进件机构",trigger:"blur"}],auditingUser:[{required:!0,message:"请填写审核员",trigger:"blur"}],auditingDate:[{required:!0,message:"请填写批准时间",trigger:"blur"}]}}}},N=(a(425),Object(o.a)(_,y,[],!1,null,null,null));N.options.__file="src/components/manage/merchant/second/into-info.vue";var I=N.exports,k=a(370),D=(a(18),{mixins:[k.a],components:{baseInfo:h,checkInfo:b,intoInfo:I},data:function(){return{current:0,FORM_CONFIG:{field:{id:"id"}},formData:{merchantId:"",subMerName:"",subMerType:"",contactName:"",certificateType:"",certificateNo:"",companyName:"",companyCertType:"",companyCertNo:"",accountName:"",account:"",bankName:"",accountType:"",mobilePhone:"",address:"",remark:"",idCardFontPhoto:"",idCardBackPhoto:"",businessLicensePhoto:"",stroePtoto:"",groupPhoto:"",incomingUser:"",incomingDate:"",incomingNo:"",incomingOrganization:"",auditingUser:"",auditingDate:""}}},computed:{showPrev:function(){return 0<this.current},showNext:function(){return this.current<2}},methods:{prev:function(){this.current-=1},next:function(t){var e=this,a=[];[["merchantId","subMerName","subMerType","contactName","certificateType","certificateNo","companyName","companyCertType","companyCertNo"],["accountName","account","bankName","accountType","mobilePhone"],["idCardFontPhoto","idCardBackPhoto","businessLicensePhoto","stroePtoto","groupPhoto"]][e.current].forEach(function(t){e.$refs.form.validateField(t,function(t){t&&a.push(t)})}),a.length||(e.current+=1)},closeDefind:function(){this.close(this.firstPage)},firstPage:function(){this.current=0}}}),F=Object(o.a)(D,u,[],!1,null,null,null);F.options.__file="src/components/manage/merchant/second/form.vue";var $=F.exports,w={mixins:[a(369).a],components:{Search:l,DialogForm:$,BreadCrumb:r.a},data:function(){return{pageTitle:"二级商户管理",crumbData:["商户管理","二级商户管理"],filter:{incomingNo:"",merchantId:"",subMerId:"",subMerName:"",contactName:"",companyName:""},TABLE_CONFIG:{field:{id:"id"},api:{query:this.$cfg.API.merchant.second.query,delete:this.$cfg.API.merchant.second.del}},columns:[{title:"序号",type:"index",width:50,align:"center"},{title:"进件单号",key:"id",align:"center"},{title:"一级商户编号",key:"merchantId",align:"center"},{title:"二级商户编号",key:"subMerId",align:"center"},{title:"二级商户名称",key:"subMerName",align:"center"},{title:"二级商户类型",key:"subMerType",width:100,align:"center",slot:"merchanttype"},{title:"法定代表人",key:"contactName",width:100,align:"center"},{title:"企业名称",key:"companyName",align:"center"},{title:"启用状态",align:"center",slot:"status"},{title:"修改启用状态",align:"center",width:120,slot:"handlestatus"},{title:"操作",align:"center",width:120,slot:"handle"}]}},filters:{merchantType:function(t){return 1==t?"个人商户":"企业商户"},statusText:function(t){return 1==t?"已启用":0==t?"已停用":void 0},statusColor:function(t){return 1==t?"success":0==t?"gray":void 0}},methods:{showDetail:function(t,e,a){this.$refs.dialogform.show(t,e,a),this.$bus.emit("fetchFirstMerchant")},changeStatusConfirm:function(t,e){var a=this;a.$set(a.listData[e],"switchLoading",!0),a.$Modal.confirm({title:"警告",content:"<p>确定更改启用状态吗?</p>",loading:!0,onOk:function(){a.changeStatus(t,e),a.$Modal.remove()},onCancel:function(){a.$set(a.listData[e],"switchLoading",!1)}})},changeStatus:function(t,e){var a=this,n=t.id,r=t.status;a.$api(a.$cfg.API.merchant.second.updateStatus,{id:n,status:r}).then(function(t){a.$set(a.listData[e],"status",r),a.$set(a.listData[e],"switchLoading",!1),a.$Message.success("状态修改成功")}).catch(function(t){a.$set(a.listData[e],"status","1"==r?"0":"1"),a.$set(a.listData[e],"switchLoading",!1),a._showErrMsg(t,"状态修改失败")})}}},C=(a(426),Object(o.a)(w,n,[],!1,null,null,null));C.options.__file="src/components/manage/merchant/second/index.vue";e.default=C.exports}}]);