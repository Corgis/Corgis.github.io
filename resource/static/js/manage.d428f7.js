!function(c){function t(t){for(var e,n,r=t[0],o=t[1],a=t[2],i=0,s=[];i<r.length;i++)n=r[i],p[n]&&s.push(p[n][0]),p[n]=0;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(c[e]=o[e]);for(d&&d(t);s.length;)s.shift()();return l.push.apply(l,a||[]),u()}function u(){for(var t,e=0;e<l.length;e++){for(var n=l[e],r=!0,o=1;o<n.length;o++){var a=n[o];0!==p[a]&&(r=!1)}r&&(l.splice(e--,1),t=m(m.s=n[0]))}return t}var n={},f={2:0},p={2:0},l=[];function m(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return c[t].call(e.exports,e,e.exports,m),e.l=!0,e.exports}m.e=function(l){var t=[];f[l]?t.push(f[l]):0!==f[l]&&{3:1,4:1,5:1,6:1,7:1,8:1}[l]&&t.push(f[l]=new Promise(function(t,r){for(var e="static/css/"+({}[l]||l)+".d428f7.css",o=m.p+e,n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var i=(c=n[a]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(i===e||i===o))return t()}var s=document.getElementsByTagName("style");for(a=0;a<s.length;a++){var c;if((i=(c=s[a]).getAttribute("data-href"))===e||i===o)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var e=t&&t.target&&t.target.src||o,n=new Error("Loading CSS chunk "+l+" failed.\n("+e+")");n.request=e,delete f[l],u.parentNode.removeChild(u),r(n)},u.href=o,document.getElementsByTagName("head")[0].appendChild(u)}).then(function(){f[l]=0}));var e,n=p[l];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,e){n=p[l]=[t,e]});t.push(n[2]=r);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,m.nc&&a.setAttribute("nonce",m.nc),a.src=m.p+"static/js/"+({}[e=l]||e)+".d428f7.js",o=function(t){a.onerror=a.onload=null,clearTimeout(i);var e=p[l];if(0!==e){if(e){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+l+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,e[1](o)}p[l]=void 0}};var i=setTimeout(function(){o({type:"timeout",target:a})},12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},m.m=c,m.c=n,m.d=function(t,e,n){m.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},m.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},m.t=function(e,t){if(1&t&&(e=m(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(m.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)m.d(n,r,function(t){return e[t]}.bind(null,r));return n},m.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return m.d(e,"a",e),e},m.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},m.p="/resource/",m.oe=function(t){throw console.error(t),t};var e=window.webpackJsonp=window.webpackJsonp||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var o=0;o<e.length;o++)t(e[o]);var d=r;l.push([377,0]),u()}({1:function(t,e,n){t.exports=n(45)(3)},139:function(t,e,n){t.exports=n(45)(90)},150:function(t,e,n){"use strict";var r=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ui-manage-footer"})};r._withStripped=!0;n(322);var o=n(44),a=Object(o.a)({},r,[],!1,null,null,null);a.options.__file="src/components/manage/common/footer.vue";e.a=a.exports},26:function(t,e,n){t.exports=n(45)(87)},32:function(t,e,n){var r="https://www.easy-mock.com/mock/5cbd1d90d025f46f6690ae11/api-mp/".replace(/([^:])\/{2,}/g,"$1/"),o={400:"{status}:请求数据格式错误！",401:"{status}:请刷新页面重新操作或退出重登录！",403:"{status}:请刷新页面重新操作或退出重登录！",404:"{status}:请求路径不存在！",405:"{status}:请求方法服务端不允许！",408:"{status}:请求超时，请稍后重试！",415:"{status}:服务器无法处理请求附带的媒体格式！",500:"{status}:系统异常，请刷新页面重新操作或退出重登录！",other:"{status}:网络问题，请稍后重试！"};t.exports={baseURL:r,timeout:6e4,contentType:{xml:"text/xml",json:"application/json;charset=UTF-8",form:"application/x-www-form-urlencoded;charset=UTF-8"},method:["OPTIONS","HEAD","GET","POST","PUT","DELETE","TRACE","CONNECT"],statusCode:o,getStatusTxt:function(n){var t=o[n.status]||o.other;return t=t.replace(/\{(\w+)\}/g,function(t,e){return n[e]||""})}}},322:function(t,e,n){"use strict";var r=n(70);n.n(r).a},324:function(t,e,n){var r={"./zh-cn":138,"./zh-cn.js":138};function o(t){var e=a(t);return n(e)}function a(t){if(n.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(r)},o.resolve=a,(t.exports=o).id=324},325:function(t,e,n){"use strict";var r=n(71);n.n(r).a},354:function(t,e){},360:function(t,e,n){},377:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"parse",function(){return L}),n.d(r,"compose",function(){return I}),n.d(r,"getParam",function(){return $}),n.d(r,"getvar",function(){return N}),n.d(r,"paramToObj",function(){return A}),n.d(r,"parseParam",function(){return D}),n.d(r,"encode",function(){return F}),n.d(r,"join",function(){return q}),n.d(r,"completion",function(){return U});n(157);var o=n(1),a=n(72),i="/gateway/api.action",u={common:{userInfo:"GET:/v1.0/common/userinfo",schoolLogo:"GET:/v1.0/schoolLogo/{id}",phone_info:"GET:/v1.0/common/phone_info",info:"GET:/v1.0/common/info",login:"POST:/v1.0/login",captcha:"GET:/v1.0/captcha",new:"POST:".concat(i,"?apiType=manage&method=plant/test/mulute.action"),newOne:"POST:".concat(i,"/{id}?method=plant/new/test.action&id={id}"),test:"POST:/v1/1234567/merchantApply/findPayment?RequestType=form"},uploadCerFil:"POST:v1/123456/merchantInfo/uploadCerFile",commons:{login:"POST:/platform-gouc/user/login",logout:"POST:/platform-gouc/user/logout",captcha:"GET:/platform-gouc/stream/captcha",getPermission:"POST:/platform-gouc/user/powerInfo",info:"POST:/platform-gouc/user/info"},system:{user:{query:"GET:/userInfo/list",add:"POST:/userInfo/save",edit:"POST:/userInfo/update",del:"POST:/userInfo/remove"}},application:{market:{query:"",add:"",edit:"",del:""}}},s={title:"智能终端管理平台",sex:[{label:"男",value:1},{label:"女",value:2}]},c={illegal:["exe","cmd","sh","bat","com","dll"],video:["mp4","m4v","flv","f4v","wmv","avi","mov","mpg","mpeg","3gp","rmvb"],audio:["mp3","aac","wav","wma","cda","flac","m4a","mid","mka"],document:["doc","docx","ppt","pptx","pdf"],image:["jpg","jpeg","gif","png"],excel:["xls","xlsx"],word:["doc","docx"],ppt:["ppt","pptx"],pdf:["pdf"],type:{other:0,video:1,audio:2,document:3,image:4},status:{trans:1,normal:2,transFail:-1,uploadFail:-2},chunkSize:"1MB",maxSize:"4GB",thumbMaxSize:"500KB",docMaxSize:"100MB",typeLabel:[{value:1,label:"视频"},{value:2,label:"音频"},{value:3,label:"文档"},{value:4,label:"图片"},{value:0,label:"其他"}],thumbSize:{width:500,height:281}},l={API:u,VAR:s,FILE:c,REG:{phone:/^1[345789]\d{9}$/,letterOrNumber:/^[0-9a-zA-Z]*$/,idNumber:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/},install:function(t){l.installed||(l.installed=!0,t.prototype.$cfg=l)}},f=l,p=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"manage"}},[e("div",{staticClass:"ui-content-container"},[e("router-view")],1)])};p._withStripped=!0;var m=n(44),d=Object(m.a)({},p,[],!1,null,null,null);d.options.__file="src/components/manage/index.vue";var h=d.exports,g=n(102),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"title",rawName:"v-title",value:e.pageTitle,expression:"pageTitle"}],staticClass:"c-m-login"},[n("div",{staticClass:"ui-login-logo"},[e._v("智能终端管理平台\n\t\t"),n("div",{staticClass:"right-login"},[n("div",{staticClass:"login-title"},[e._v("系统登录")]),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules}},[n("el-form-item",{attrs:{prop:"account"}},[n("el-input",{attrs:{placeholder:"用户名",size:"medium"},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-person"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",size:"medium",placeholder:"密码"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-lock"})])],2)],1),e._v(" "),e.formData.id?n("el-form-item",{staticClass:"captcha-item"},[n("el-input",{attrs:{type:"password",size:"medium",placeholder:"验证码"},model:{value:e.formData.captcha,callback:function(t){e.$set(e.formData,"captcha",t)},expression:"formData.captcha"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-authcode"})])],2),e._v(" "),n("img",{attrs:{src:e.captchaPath,alt:""},on:{click:e.getPath}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"login-btn"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)]),e._v(" "),n("Footer")],1)};v._withStripped=!0;var y=n(150);function b(t){return"[object Array]"===Object.prototype.toString.apply(t)}var w=n(17),T=n.n(w);function x(t){if(!t)return!1;if("object"==T()(t)||b(t))return!0;if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=T()(e)||!e)}catch(t){return!1}return!1}var P=n(57);var C=/^[\s\u3000\uFEFF]+|[\s\u3000\uFEFF]+$/g;function S(t){if("string"==typeof t)return t.replace(C,"");if("object"!=T()(t))return t;for(var e in t)t.hasOwnProperty(e)&&(t[e]=S(t[e]));return t}function O(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";return(new Array(e).join(n)+t).slice(-Math.max(e,(""+t).length))}var E=n(52);var j,M,_=/^(?:([^/]*:)\/\/(?:([^:]*)(?::(.*))?@)?([^:/]+)(:\d+)?)?([^?#]+)?(\?[^#]*)?(#.*)?$/,k=/(.*?)\[(\d+)\]/;function L(t,e){return t=t.toString(),M||"undefined"==typeof document||(M=document.createElement("a")),e&&M?(M.setAttribute("href",t),{protocol:M.protocol,username:decodeURIComponent(M.username),password:decodeURIComponent(M.password),host:M.host,hostname:M.hostname,port:M.port,pathname:M.pathname,search:M.search,hash:M.hash}):function(t){"//"!=t.substr(0,2)&&"://"!=t.substr(0,3)||(t=("undefined"==typeof location?"http:":location.protocol)+t);var e=t.match(_)||[],n={protocol:e[1]||"",username:decodeURIComponent(e[2]||""),password:decodeURIComponent(e[3]||""),host:e[4]||"",hostname:e[4]||"",port:e[5]?e[5].substr(1):"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""};"http:"==n.protocol&&"80"==n.port?n.port="":"https:"==n.protocol&&"443"==n.port&&(n.port="");n.port&&(n.host+=":"+n.port);return n}(t)}function I(t){var e=t.protocol,n=t.username,r=t.password,o=t.host,a=t.pathname,i=t.search,s=t.hash,c="";return e&&(":"==e?e="":e+="//"),(n||r)&&(n&&(c+=encodeURIComponent(n)),r&&(c+=":"+encodeURIComponent(r)),c+="@"),e+c+o+a+i+s}function $(t){return j||(j=A(window.location.href)),t?j[t]:j}function N(t,e){var n=t.split("?");if(2!=n.length)return!1;for(var r=n[1].split("&"),o=r.length-1;0<=o;o--){var a=r[o].split("=");if(a[0]==e)return a[1]}return!1}function A(t){var o={},e=L(t,!0);return e.search&&e.search.substring(e.search.indexOf("?")+1).split("&").forEach(function(t){var e=t.split("=");if(e[0]){e[1]=e[1]?decodeURIComponent(e[1]):"";var n=e[0].match(k);if(n)void 0===o[n[1]]&&(o[n[1]]=[]),o[n[1]][n[2]]=e[1];else{var r=o[e[0]];o[e[0]]=(r?r+",":"")+e[1]}}}),o}function D(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(null==t)return"";var r="",o=T()(t);if("string"==o||"number"==o||"boolean"==o)r+="&"+e+"="+(n?encodeURIComponent(t):t);else for(var a in t){var i=null==e?a:e+(t instanceof Array?"["+a+"]":"."+a);r+=D(t[a],i,n)}return r}function F(){var t=D.apply(this,arguments);return"&"==t.substr(0,1)&&(t=t.substring(1)),t}function q(t,e){if(!e)return t;var n="";if(!(n="string"==typeof e?e:F(e)))return t;var r=L(t);return r.search+=(-1==r.search.indexOf("?")?"?":"&")+n,I(r)}function U(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";n||(n="https://www.easy-mock.com/mock/5cbd1d90d025f46f6690ae11/api-mp/".replace(/([^:])\/{2,}/g,"$1/"));var r=L(t),o=r.pathname.indexOf(":");-1<o&&o<=7&&(r.pathname=r.pathname.substring(o+1)),r.protocol&&":"!=r.protocol||(r.pathname=(n+r.pathname).replace(/\/{2,}/,"/"));var a="";return(a="string"==typeof e?e:F(e))&&(r.search+=(-1==r.search.indexOf("?")?"?":"&")+a),I(r)}var R=n(2),B=n.n(R);B.a.locale("zh-cn");var z={components:{Footer:y.a},data:function(){return{pageTitle:"登录",captchaPath:"",formData:{account:"",password:"",captcha:"",op:1,id:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不得小于六位",trigger:"blur"}]}}},methods:{getPath:function(){var t=+new Date,e="".concat(this.$cfg.API.commons.captcha,"?id=").concat(this.formData.id,"&width=100&height=36&type=png&_t=").concat(t);this.captchaPath=r.completion(e)},login:function(){var e=this,r=this;this.$refs.form.validate(function(t){t&&e.$api(e.$cfg.API.commons.login,r.formData,{showLoading:!0}).then(function(t){var e=t.object.token||"";r.jump(e)}).catch(function(t){var e=t.data.errcode,n=t.data.object&&t.data.object.id;e&&n&&(r.formData.id=n,r.getPath()),r._showErrMsg(t,"登录失败")})})},fetchCaptcha:function(t){var e=this,n="".concat(e.$cfg.API.commons.captcha,"?id=").concat(t,"&width=130&height=50&type=png");this.$api(n).then(function(t){e.captchaPath=t}).catch(function(t){})},jump:function(t){this.$store.commit("info/setUserToken",t);var e=this.$route.query.path||"/";this.$router.push({path:e})}},mounted:function(){},created:function(){var e=this;document.onkeydown=function(t){13==t.keyCode&&e.login()}},beforeDestroy:function(){document.onkeydown=void 0}},G=(n(325),Object(m.a)(z,v,[],!1,null,null,null));G.options.__file="src/components/manage/login/index.vue";var K=G.exports;o.default.use(g.a);var H,J=new g.a({scrollBehavior:function(){return{y:0}},routes:[{path:"/login",name:"login",component:K}],linkActiveClass:"active"}),W=n(103),X=n(32),Y=n.n(X),Z=n(12),V=n.n(Z),Q=n(151),tt=n.n(Q),et=n(152),nt=n.n(et),rt=n(26),ot=n.n(rt),at=n(106),it=n.n(at),st=0;function ct(){0===st&&(H=rt.Loading.service({customClass:"diy-load-content",background:"rgba(255,255,255,0)",text:"数据加载中，请稍候..."})),st++}function ut(){st<=0||0===--st&&it()(lt,200)()}var lt=function(){0===st&&H.close()},ft={timeout:Y.a.timeout,baseURL:Y.a.baseURL,contentType:"json",trim:!0,retry:!0,maxRetry:2,headers:{"X-Requested-With":"XMLHttpRequest"}};var pt=function(t){var i=tt.a.create(V()(!0,{},ft,t));return i.interceptors.request.use(function(t){if(!t)throw new Error("请求配置丢失，请检查request拦截器是否没有return返回配置");t.contentType&&Y.a.contentType[t.contentType]&&(t.headers["Content-Type"]=Y.a.contentType[t.contentType]);var e=N(t.url,"RequestType");e&&(t.headers["Content-Type"]=Y.a.contentType[e]);var n=t.data,r=me.state.info.UserToken||"";return r&&(n=V()({},n,{token:r}),t.headers.token=r),n&&t.trim&&(n="object"==T()(n)?"get"==t.method?S(n):"json"==t.contentType?JSON.stringify(n,function(t,e){return S(e)}):nt.a.stringify(S(n)):x(n)?JSON.stringify(S(JSON.parse(n))):S(n),t.data=n),"get"==t.method.toLowerCase()&&(t.url=q(t.url,n)),t.showLoading&&ct(),t}),i.interceptors.response.use(function(t){var e=t.data,n=t.config;t.config.showLoading&&ut(),e&&x(e)||(e={errcode:"-23",errmsg:"",object:""});var r,o=!1;if((!n.retryTime||n.retryTime<n.maxRetry)&&("boolean"==typeof n.retry&&n.retry?o=30==e.code:"function"==typeof n.retry&&(o=!0===n.retry(e))),o)return n.source?(r=n.source).source=V()({},r):(r=n).url=r.url.replace(r.baseURL,""),r.retryTime=n.retryTime?n.retryTime+1:1,i(r);if("0"===e.errcode)return e;e.errmsg||(e.errmsg="操作失败！",e.errtype="public");var a=new Error(e.errmsg);throw a.data=e,a.response=t,a},function(t){var e={errcode:"-23",errmsg:""};return t&&t.response?(e.errcode=-t.response.status,e.errmsg=Y.a.getStatusTxt(t.response)):(console.error(t),e.errmsg="请求失败：网络错误或超时"),t.data=e,t.config.showLoading&&ut(),Promise.reject(t)}),i},mt=/\{(.*?)\}/g;function dt(t){if(t.apis&&this.injectAPI(t.apis),t.methods){var e="boolean"==typeof t.methods?Y.a.method:t.methods;this.injectMethod(e)}this.instance=pt(t.axios)}dt.prototype={request:function(t,n,e){if(!this.instance)throw new Error("未初始化，请先执行install方法");if(t){var r=t.indexOf(":"),o="get",a={};return r!=t.indexOf("://")&&-1<r&&r<=7&&(o=t.substr(0,r).toLowerCase(),t=t.substring(r+1)),mt.test(t)&&(t=t.replace(mt,function(t,e){return n&&void 0!==n[e]?n[e]:""})),a.url=t,a.method=o,a.data=n,(a=V()(a,e)).source=V()({},a),this.instance(a)}},injectAPI:function(t){var r=this;for(var e in t)if(t.hasOwnProperty(e))if("object"==T()(e))for(var n in e)this[e+"."+n]=function(n){return function(t,e){return r.request(n,t,e)}}(t[e][n]);else this[e]=function(n){return function(t,e){return r.request(n,t,e)}}(t[e]);return this},injectMethod:function(t){for(var e=t.length,n=0;n<e;n++)this[t[n].toLowerCase()]=function(r){return function(t,e,n){return n=V()({},n,{method:r}),this.request(t,e,n)}}(t[n]);return this},intercept:function(){if(!this.instance)throw new Error("未初始化，请先执行install方法");var t=arguments[0].toLowerCase(),e=Array.prototype.slice.call(arguments,1),n=this.instance.interceptors[t];return n.use.apply(n,e),this}};var ht=dt,gt=n(100),vt=n(16),yt={namespace:"$api",methods:!0};function bt(t){var e=new ht(t),n=gt(ht.prototype.request,e);return vt.extend(n,ht.prototype,e),vt.extend(n,e),n}var wt=bt(yt);wt.install=function(t,e){if(e=V()(yt,e),!t||!t[e.namespace]){var n=bt(e);return t&&("function"==typeof t?t.prototype[e.namespace]=n:t[e.namespace]=n),n}};var Tt=wt,xt=(n(354),window),Pt=xt.location,Ct=xt.navigator,St=Ct.userAgent.toLowerCase();function Ot(t){return t.test(St)}var Et="ontouchend"in xt,jt=Ot(/android|htc/)||/linux/i.test(Ct.platform+""),Mt=jt&&Ot(/mobile/),_t=jt&&!Mt,kt=!jt&&Ot(/ipad/),Lt=!jt&&Ot(/ipod|iphone/),It=kt||Lt,$t=Ot(/windows/),Nt=Ot(/windows phone/),At=$t&&Ot(/touch/)&&!Nt,Dt=Ot(/meego/),Ft=!!Ct.standalone,qt=Ot(/ucbrowser/),Ut=Ot(/micromessenger/),Rt=Ot(/qq/),Bt=!!xt.chrome,zt=jt&&Ot(/htc\s+/),Gt=Mt||Lt||Nt||Dt,Kt=Ot(/tablet/)||_t||kt||At;(""+Pt.port).indexOf("0");o.default.use(Tt);var Ht=o.default.prototype.$api;Ht.intercept("request",function(t){return t.data=V()({_t:+new Date},window._params,t.data),t}),Ht.intercept("response",function(t){return null==t.result&&(t.result={}),t},function(t){return 168==(t.data||{}).code&&(rt.Message.error({showClose:!0,message:"session失效，重新登录"}),setTimeout(function(){me.commit("info/setUserToken",""),me.commit("rbac/setPermission",[]);var t=J.history.current.path||"";J.push({name:"login",query:{path:t}}),location.reload()},1500)),Promise.reject(t)});var Jt=Ht,Wt=n(104),Xt=n.n(Wt),Yt=!1,Zt={namespaced:!0,state:{UserToken:Xt.a.get("token"),common:{},school:{session:"odsfe324ds-dersd"},collapseStatus:!1},mutations:{setCommonInfo:function(t,e){t.common=e},setSchoolInfo:function(t,e){t.school=e},setUserToken:function(t,e){var n=e||"";Xt.a.set("token",n,{expires:1}),t.UserToken=n},setCollapseStatus:function(t,e){t.collapseStatus=e}},actions:{fetchCommonInfo:function(t){var e=t.commit,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.type,o=n.force;if(!Yt||o){var a=r?u.common.phone_info:u.common.info;Jt(a).then(function(t){Yt=!0,e("setCommonInfo",t.result)}).catch(function(){})}},fetchUserInfo:function(t){var e=t.commit;Jt(u.commons.info).then(function(t){e("setCommonInfo",t.object.userInfo||{})}).catch(function(){})}}},Vt=n(105),Qt=n.n(Vt),te=n(153),ee=n.n(te),ne=n(154);function re(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o=[];return t.forEach(function(n,t){r.forEach(function(t,e){t.authKey===n.meta.authKey&&(n.meta.icon=t.icon,n.meta.name=t.name,n.meta.type=t.type,n.children&&0<n.children.length&&(n.children=re(r,n.children)),o.push(n))})}),o}function oe(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=[];for(var n in t)2==t[n].type&&e.push(t[n]);return e}var ae=function(){return n.e(8).then(n.bind(null,418))},ie=[{path:"/",name:"Home",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,415))},redirect:"home",children:[{path:"home",name:"homepage",meta:{authName:"home-page",groupName:"homepage",icon:"icon-home",name:"首页"},component:function(){return n.e(6).then(n.bind(null,417))}}]},{path:"/401",name:"notauth",component:function(){return n.e(7).then(n.bind(null,416))}},{path:"/404",name:"notfound",component:ae},{path:"*",component:ae,redirect:"/404"}],se=function(){return n.e(9).then(n.bind(null,419))},ce=function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,414))},ue=[{path:"/app",component:se,meta:{authKey:"application-manage",groupName:"appManage",name:"应用管理",icon:"md-settings"},children:[{path:"market",name:"market",meta:{authKey:"application-manage-market",groupName:"appManage",name:"应用市场",icon:"md-person"},component:function(){return n.e(3).then(n.bind(null,413))}},{path:"issue",name:"issue",meta:{authKey:"application-manage-issue",groupName:"appManage",name:"应用发布",icon:"md-person"},component:ce}]},{path:"/terminal",component:se,meta:{authKey:"terminal-manage",groupName:"terminalManage",name:"终端管理",icon:"md-settings"},children:[{path:"account",name:"account",meta:{authKey:"terminal-manage-account",groupName:"terminalManage",name:"终端明细",icon:"md-person"},component:ce}]}];function le(t){if(e=t,"[object Object]"!==Object.prototype.toString.call(e))return[];var e,n=[];for(var r in t)n.push(t[r]);return n}var fe,pe={namespaced:!0,state:{permissionList:[],authList:[]},mutations:{setPermission:function(t,e){t.permissionList=e},setAuthArray:function(t,e){t.authList=e}},actions:{FETCH_PERMISSION:(fe=n.n(ne)()(Qt.a.mark(function t(e){var n,r,o,a,i,s,c;return Qt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,Jt(u.commons.getPermission,"",{showLoading:!0});case 3:o=t.sent,a=le(o.object.uiPowerMap["terminal-web"]),i=re(a,ue),(n=(s=ie)[0].children).push.apply(n,ee()(i)),J.addRoutes(s),r("setPermission",s),c=oe(a),r("setAuthArray",c),console.log(c,"我是操作权限");case 13:case"end":return t.stop()}},t)})),function(t){return fe.apply(this,arguments)})}};o.default.use(W.a);var me=new W.a.Store({modules:{info:Zt,rbac:pe}});function de(e,t){var n="";return b(t)&&t.findIndex(function(t){if(t.value==e)return n=t.label,!0}),n}function he(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return 0<String(t).indexOf(".")&&(t=t.toFixed(e).replace(/\.0+$|0+$/,"")),t}o.default.mixin({methods:{_showErrMsg:function(t,e){var n="";n=t.data&&t.data.errmsg?t.data.errmsg:t.message,"public"==t.data.errtype&&(n=e||t.message),n&&rt.Message.error({showClose:!0,message:n})},_auth:function(n){return 0<(this.$store.state.rbac.authList||[]).filter(function(t,e){return t.authName==n}).length},_loseSession:function(){rt.Message.error({showClose:!0,message:"session失效，重新登录"}),setTimeout(function(){me.commit("info/setUserToken",""),me.commit("rbac/setPermission",[]);var t=J.history.current.path||"";J.push({name:"login",query:{path:t}}),location.reload()},1500)},_asyncDialog:function(t,e,o){var a=this;return(o=V()({mode:"confirm",api:"",params:null,success:null,fail:null,failTip:!0,failClose:!0},o)).api&&a.$api&&(o.beforeClose=function(t,e,n){var r;"confirm"===t?(e.confirmButtonLoading=!0,r="function"==typeof o.params?o.params(e):o.params,a.$api(o.api,r).then(o.success).then(function(){n(),setTimeout(function(){e.confirmButtonLoading=!1},300)}).catch(function(t){o.fail&&o.fail(t),o.failTip&&a._showErrMsg(t),o.failClose&&n(),e.confirmButtonLoading=!1})):n()}),a["$"+o.mode](t,e,o).catch(function(){})}}}),o.default.filter("selectLabel",de),o.default.filter("fileType",function(t){return de(t,c.typeLabel)}),o.default.filter("fileThumb",function(t,e){switch(e){case"studio":return t||s.cover.studioCourse;case"study":return t||s.cover.studyCourse;default:return t||s.cover.resource}}),o.default.filter("sum",function(t,n){var r=0;return t&&b(t)&&t.forEach(function(t){var e="object"==T()(t)?t[n]:t;r+=parseInt(e)}),r}),o.default.filter("fileStatus",function(t){switch(t){case c.status.trans:return"转码中";case c.status.normal:return"上传成功";case c.status.transFail:return"转码失败";case c.status.uploadFail:return"上传失败";default:return"未知"}}),o.default.filter("dataSource",function(t){switch(t){case 1:return"资源平台";case 2:return"智课堂";case 3:return"MReal"}}),o.default.filter("permission",function(t){switch(t){case 1:return"管理员";case 2:default:return"教师"}}),o.default.filter("numberFixed",he),o.default.filter("percentFormat",function(t){var e=Math.min(100*t,100);return isNaN(e)?0:e=he(e)}),o.default.filter("priceFormat",function(t,e){var n=he(t/100);return e?e+n:n}),o.default.filter("discountFormat",function(t,e){return he(t/e*10)+"折"});var ge=/\n/g;function ve(){var t=this.getAttribute("data-error-img"),e=this.getAttribute("src");t&&e!=t&&(this.src=t),this.removeEventListener("error",ve)}o.default.filter("line2br",function(t){return(t||"").replace(ge,"<br>")}),o.default.filter("size",E.a),o.default.filter("secondFormat",P.b),o.default.filter("dateFormat",P.a),o.default.filter("prefix",function(t){return O(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"0")}),o.default.directive("title",function(t,e){var n;(n=b(e.value)?e.value.slice(0):[e.value]).push(s.title),document.title=n.join("_")}),o.default.directive("error",{bind:function(t,e){t.setAttribute("data-error-img",e.value),t.addEventListener("error",ve)},unbind:function(t){t.removeEventListener("error",ve)}});n(359),n(360);o.default.use(a.a),o.default.use(ot.a,{size:"medium"}),o.default.use(f),J.beforeEach(function(n,t,r){if(me.state.info.UserToken)if(me.state.rbac.permissionList.length){var e=me.state.rbac.authList||[],o=n.meta.authKey+"-list";0<e.filter(function(t,e){return t.authKey==o}).length||"/401"==n.path||"/home"==n.path||"/404"==n.path||"/login"==n.path?r():r({name:"notauth"}),n.name,r()}else me.dispatch("rbac/FETCH_PERMISSION").then(function(){r({path:n.path})}).catch(function(t){var e=t.data&&t.data.errmsg?t.data.errmsg:"权限获取失败";ot.a.Message.error(e),me.commit("info/setUserToken",""),"/login"!=n.path?r({name:"login"}):r()});else"login"===n.name?r():"/"===n.path?r({name:"login"}):r({name:"login",query:{path:n.path}})}),new o.default({el:"#manage",store:me,router:J,render:function(t){return t(h)}})},45:function(t,e){t.exports=element},52:function(t,e,n){"use strict";function r(t,e){if(e=e||"",0===t)return"0"+e+"B";var n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toPrecision(3)+e+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}n.d(e,"a",function(){return r})},57:function(t,e,n){"use strict";function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";return t&&(t=(e=t)?e instanceof Date?e:(e=e.toString().replace("T"," "),e=/^(\d{10}|\d{13})$/g.test(e)?new Date(parseInt(10==e.length?1e3*e:e)):new Date(e.replace(/-/g,"/")),isNaN(e.getDate())?null:e):null)?i(n,{y:t.getFullYear()+"",M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds(),W:["日","一","二","三","四","五","六"][t.getDay()]}):""}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[hh:]mm:ss";return t=parseInt(t),isNaN(t)?"":i(e,{h:Math.floor(t/3600),m:Math.floor(t/60%60),s:Math.floor(t%60)})}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var a=/\[(([yMdhmsqSW])+)(.*?)\]|(([yMdhmsqSW])+)/g;function i(t,u){return t&&u?t.replace(a,function(t,e,n,r,o,a){var i=n||a,s=e||o,c=u[i];return void 0!==c?e&&!c?"":"y"===i?c.substr(4-s.length)+(r||""):(1<s.length&&(c=(c="0"+c).substr(c.length-2)),c+(r||"")):t}):""}},70:function(t,e,n){},71:function(t,e,n){},73:function(t,e,n){t.exports=n(45)(20)}});